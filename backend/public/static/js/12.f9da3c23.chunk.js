(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[12],{257:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a(4),n=a(2),r=a.n(n),i=a(6),l=a(7),o=a(3),d=a.n(o),b=a(88),u=a(16),j=a.n(u),m=a(11),h=a(0),p=function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],u=Object(c.useState)("Add"),p=Object(l.a)(u,2),f=p[0],x=p[1],O=Object(c.useState)(),v=Object(l.a)(O,2),g=v[0],N=v[1],y=Object(c.useState)([]),k=Object(l.a)(y,2),_=k[0],w=k[1],S=Object(c.useState)(-1),C=Object(l.a)(S,2),E=C[0],q=C[1],I=Object(c.useState)(""),P=Object(l.a)(I,2),A=P[0],H=P[1],M=Object(b.b)(),D=M.register,J=M.handleSubmit,Y=M.setValue,L=Object(s.h)(),U=Object(s.f)(),V=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,t.patient_id=E,e.next=5,"Add"===f?d.a.post("/illness-histories",t):d.a.put("/illness-histories/".concat(g),t);case 5:j.a.success("Illness History saved successfully."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(m.b)(e.t0);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/illness-histories/".concat(t));case 3:c=e.sent,s=c.data,q(s.patient_id),H((null===(a=s.patient)||void 0===a?void 0:a.name)||""),Y("chief_complaint",s.chief_complaint),Y("physical_exams[bp]",s.physical_exams.bp),Y("physical_exams[wt]",s.physical_exams.wt),Y("physical_exams[ht]",s.physical_exams.ht),Y("physical_exams[spo2]",s.physical_exams.spo2),Y("physical_exams[pr]",s.physical_exams.pr),Y("physical_exams[tt]",s.physical_exams.tt),N(s.id),$(".form-group").addClass("is-filled"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),Object(m.b)(e.t0),U.goBack();case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/patients?paginate=false");case 2:t=e.sent,a=t.data,w(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([F()]);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.toJSON()),j.a.error("Unable to fetch patient list.");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){K(),L.path.includes("edit")&&(x("Edit"),B(L.params.id))}),[]),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("div",{className:"card-header card-header primary",children:[f," Illness History",Object(h.jsx)("p",{className:"card-category",children:"Complete the form below. Leave blank if not applicable."}),Object(h.jsxs)("p",{className:"card-category",children:["Fields with ",Object(h.jsx)("span",{style:{color:"rgb(190, 0, 0)"},children:"*"})," are required."]})]}),Object(h.jsx)("div",{className:"card-body",children:Object(h.jsx)("form",{onSubmit:J(V),children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Patient"}),Object(h.jsx)("input",{className:"form-control ".concat(Object(m.d)("Edit"===f,"disabled")),disabled:n||"Edit"===f,onChange:function(e){var t=e.target.value,a=_.find((function(e){return e.name===t}));a?(q(a.id),H(a.name)):H(t)},value:A,list:"patientList"}),Object(h.jsx)("datalist",{id:"patientList",children:_.map((function(e,t){return Object(h.jsx)("option",{value:e.name,children:e.name},t)}))})]})}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Chief Complaint"}),Object(h.jsx)("input",{className:"form-control ".concat(Object(m.d)("Edit"===f,"disabled")),disabled:n||"Edit"===f,ref:D,name:"chief_complaint"})]})}),Object(h.jsxs)("div",{className:"col-12",children:[Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsx)("h3",{children:"Physical Exams"})]}),Object(h.jsx)("div",{className:"col-12 col-md-4",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Blood Pressure"}),Object(h.jsx)("input",{ref:D,type:"text",className:"form-control",disabled:n,name:"physical_exams[bp]"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-4",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Weight"}),Object(h.jsx)("input",{ref:D,type:"text",className:"form-control",disabled:n,name:"physical_exams[wt]"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-4",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Height"}),Object(h.jsx)("input",{ref:D,type:"text",className:"form-control",disabled:n,name:"physical_exams[ht]"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-4",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"SPO2"}),Object(h.jsx)("input",{ref:D,type:"text",className:"form-control",disabled:n,name:"physical_exams[spo2]"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-4",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"PR"}),Object(h.jsx)("input",{ref:D,type:"text",className:"form-control",disabled:n,name:"physical_exams[pr]"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-4",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"TT"}),Object(h.jsx)("input",{ref:D,type:"text",className:"form-control",disabled:n,name:"physical_exams[tt]"})]})}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-info btn-sm",disabled:n,children:n?Object(h.jsx)("i",{className:"material-icons spin",children:"refresh"}):"Save"})})]})})})]})},f=a(21),x=a.n(f),O=a(32),v=a(14),g=a(87),N=a(85),y=a(86),k=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],o=a[1],b=Object(c.useState)(Object(m.c)()),u=Object(l.a)(b,2),p=u[0],f=u[1],k=Object(s.h)(),_=v.a.get("user"),w=function(e){return"".concat(k.path).concat(e)},S=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=v.a.get("inventory-page")||1,e.next=4,d.a.get(t||"/illness-histories?page=".concat(a));case 4:c=e.sent,s=c.data,o(s.data),f(s),v.a.set("inventory-page",s.current_page),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(m.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/search?model=IllnessHistory&keyword=".concat(encodeURIComponent(t),"&paginate=false"));case 3:a=e.sent,c=a.data,o(c),f(Object(m.c)()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.toJSON()),j.a.error("Unable to search.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){S();var e=y.b.listen("submit",(function(e){e.length>0?C(e):S()}));return function(){y.b.unlisten("submit",e)}}),[]),Object(h.jsxs)(h.Fragment,{children:[["Admin","Nurse","Midwife"].includes(_.role)?Object(h.jsx)(O.b,{to:w("/add"),className:"btn btn-info btn-sm",children:"Add New Illness History"}):null,Object(h.jsx)(N.a,{title:"Illness Histories",head:function(){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"ID"}),Object(h.jsx)("th",{children:"Patient"}),Object(h.jsx)("th",{children:"Issued"}),Object(h.jsx)("th",{colSpan:3,children:"Actions"})]})},foot:function(){return Object(h.jsx)(g.a,{pagination:p,onChange:function(e){return S(e)}})},children:n.map((function(e,t){var a=e.id,c=e.patient,s=e.created_at;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:a}),Object(h.jsx)("td",{children:null===c||void 0===c?void 0:c.name}),Object(h.jsx)("td",{children:x()(s).format("MMMM DD, YYYY hh:mm A")}),Object(h.jsxs)("td",{children:[Object(h.jsxs)(O.b,{to:w("/".concat(a)),className:"btn btn-info btn-sm",title:"View",children:[Object(h.jsx)("i",{className:"material-icons mr-1",children:"visibility"}),"View"]}),["Nurse","Midwife","Admin"].includes(_.role)?Object(h.jsxs)(O.b,{to:w("/".concat(a,"/edit")),className:"btn btn-warning btn-sm",title:"Edit",children:[Object(h.jsx)("i",{className:"material-icons mr-1",children:"create"}),"Edit"]}):null]})]},t)}))})]})};t.default=function(e){var t=Object(s.h)(),a=function(e){return"".concat(t.path).concat(e)};return Object(h.jsxs)(s.c,{children:[Object(h.jsx)(s.a,{path:a(""),exact:!0,component:k}),Object(h.jsx)(s.a,{path:a("/add"),component:p}),Object(h.jsx)(s.a,{path:a("/:id/edit"),component:p})]})}},85:function(e,t,a){"use strict";a(1);var c=a(0);t.a=function(e){var t=e.title,a=e.subtitles,s=e.head,n=e.children,r=e.foot,i=e.className;return Object(c.jsxs)("div",{className:"card ".concat(i),children:[Object(c.jsxs)("div",{className:"card-header card-header-success",children:[Object(c.jsx)("h4",{className:"card-title",children:t}),a?Object(c.jsx)("p",{className:"card-category",children:a}):null]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{className:"text-success",children:s()}),Object(c.jsx)("tbody",{children:n})]})})}),r?Object(c.jsx)("div",{className:"card-footer",children:r()}):null]})}},86:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var c=a(22),s=a(23),n=function(){function e(t){Object(c.a)(this,e),this.key=void 0,this.key=t}return Object(s.a)(e,[{key:"getKey",value:function(){return this.key}}]),e}(),r=function(){function e(){Object(c.a)(this,e),this.callbacks={}}return Object(s.a)(e,[{key:"dispatch",value:function(e,t){return e in this.callbacks?(this.callbacks[e].forEach((function(e){return e(t)})),this):this}},{key:"listen",value:function(e,t){return e in this.callbacks||(this.callbacks[e]=[]),new n(this.callbacks[e].push(t)-1)}},{key:"unlisten",value:function(e,t){e in this.callbacks&&this.callbacks[e].splice(t.getKey(),1)}}]),e}(),i=new r,l=new r},87:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(1);var c=a(11),s=a(0);function n(e){var t=e.pagination,a=e.onChange,n=e.small,r=t.links.filter((function(e){return Number.isInteger(Number(e.label))})),i=function(e){return function(t){t.preventDefault(),e&&a(e)}};return t.total<=t.per_page?null:Object(s.jsx)("nav",{"aria-label":"Page Navigation",children:Object(s.jsxs)("ul",{className:"pagination ".concat(Object(c.d)(Object(c.f)(n),"pagination-sm")),children:[Object(s.jsx)("li",{className:"page-item ".concat(Object(c.d)(null===t.prev_page_url,"disabled")),children:Object(s.jsxs)("a",{className:"page-link",href:"".concat(t.prev_page_url),onClick:i(t.prev_page_url),children:[Object(s.jsx)("span",{"aria-hidden":"true",children:"<"}),Object(s.jsx)("span",{className:"sr-only",children:"Previous"})]})}),r.map((function(e,t){var a=e.active,n=e.label,r=e.url;return Object(s.jsx)("li",{className:"page-item ".concat(Object(c.d)(a,"active")),children:Object(s.jsx)("a",{className:"page-link",href:"".concat(r),onClick:i(r),children:n})},t)})),Object(s.jsx)("li",{className:"page-item ".concat(Object(c.d)(null===t.next_page_url,"disabled")),children:Object(s.jsxs)("a",{className:"page-link",href:"".concat(t.next_page_url),onClick:i(t.next_page_url),children:[Object(s.jsx)("span",{"aria-hidden":"true",children:">"}),Object(s.jsx)("span",{className:"sr-only",children:"Next"})]})})]})})}}}]);
//# sourceMappingURL=12.f9da3c23.chunk.js.map