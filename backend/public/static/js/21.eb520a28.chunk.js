(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[21],{245:function(e,n,t){"use strict";t.r(n);var a=t(2),c=t.n(a),i=t(6),s=t(7),r=t(3),o=t.n(r),l=t(1),d=t(4),u=t(32),b=t(13),h=t(16),j=t.n(h),p=t(11),m=t(14),v=t(86),f=t(27),O=t.n(f),g=t(21),x=t.n(g),N=t(94),k=t(0);n.default=function(e){var n,t=e.mode,a=Object(l.useState)(!1),r=Object(s.a)(a,2),h=r[0],f=r[1],g=Object(l.useState)(!1),w=Object(s.a)(g,2),y=w[0],S=w[1],D=Object(l.useState)({medicines:[],inventories:[]}),I=Object(s.a)(D,2),E=I[0],A=I[1],C=Object(l.useState)({medicines:[],inventories:[]}),R=Object(s.a)(C,2),B=R[0],H=R[1],J=Object(d.f)(),M=Object(d.h)(),P=Object(l.useContext)(N.a).show,T=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/auth/logout");case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.prev=7,j.a.info("You have logged out.","Notice"),m.a.remove("user").remove("token"),J.push(b.a.LOGIN),e.finish(7);case 12:case"end":return e.stop()}}),e,null,[[0,5,7,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark((function e(){var n,t,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([o.a.get("/expiring/medicines"),o.a.get("/expiring/inventories")]);case 3:n=e.sent,t=Object(s.a)(n,2),a=t[0].data,i=t[1].data,A({medicines:a,inventories:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.toJSON());case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(c.a.mark((function e(){var n,t,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([o.a.get("/criticals/medicines"),o.a.get("/criticals/inventories")]);case 3:n=e.sent,t=Object(s.a)(n,2),a=t[0].data,i=t[1].data,H({medicines:a,inventories:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.toJSON());case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=m.a.get("user");return Object(l.useEffect)((function(){_(),K();var e=v.a.listen("logout",(function(){T()})),n=v.b.listen("submit",(function(){O()(window).width(),O()(".close-layer").trigger("click")})),t=setInterval((function(){return _()}),1e4),a=setInterval((function(){return K()}),1e4);return function(){clearInterval(t),clearInterval(a),v.a.unlisten("logout",e),v.b.unlisten("submit",n)}}),[]),Object(k.jsx)("nav",{className:"navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top",children:Object(k.jsxs)("div",{className:"container-fluid",children:[Object(k.jsxs)("div",{className:"navbar-wrapper d-flex",children:[Object(k.jsxs)(u.b,{className:"navbar-brand",to:b.a.DASHBOARD,children:["Dashboard - ",null===L||void 0===L?void 0:L.role]}),Object(k.jsx)("div",{className:"ml-2 clickable mt-1",children:Object(k.jsx)("i",{className:"material-icons ".concat(Object(p.d)("dark"===t,"text-white")),onClick:function(){"light"===t?m.a.set("background-color","dark"):m.a.set("background-color","light")},children:"light"===t?"dark_mode":"light_mode"})})]}),Object(k.jsxs)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation",children:[Object(k.jsx)("span",{className:"sr-only",children:"Toggle navigation"}),Object(k.jsx)("span",{className:"navbar-toggler-icon icon-bar"}),Object(k.jsx)("span",{className:"navbar-toggler-icon icon-bar"}),Object(k.jsx)("span",{className:"navbar-toggler-icon icon-bar"})]}),Object(k.jsxs)("div",{className:"collapse navbar-collapse justify-content-end",children:[P?Object(k.jsx)("form",{className:"navbar-form",onSubmit:function(e){e.preventDefault();var n=String(O()("#search").val());v.b.dispatch("submit",n)},children:Object(k.jsxs)("div",{className:"input-group no-border",children:[Object(k.jsx)("input",{id:"search",type:"text",className:"form-control",placeholder:"Search...",onKeyUp:function(e){if(e.preventDefault(),"Enter"===e.key){var n=e.target.value;v.b.dispatch("submit",n)}},onChange:function(e){v.b.dispatch("onChange",e)}}),Object(k.jsxs)("button",{type:"submit",className:"btn btn-white btn-round btn-just-icon",children:[Object(k.jsx)("i",{className:"material-icons",children:"search"}),Object(k.jsx)("div",{className:"ripple-container"})]})]})}):null,Object(k.jsxs)("ul",{className:"navbar-nav",children:[Object(k.jsxs)("li",{className:"nav-item dropdown",children:[Object(k.jsxs)("a",{className:"nav-link",href:"/",onClick:function(e){e.preventDefault(),S(!y)},children:[Object(k.jsx)("i",{className:"material-icons",children:"notifications"}),E.medicines.length>0||E.inventories.length>0||B.inventories.length>0||B.medicines.length>0?Object(k.jsx)("span",{className:"notification",children:E.medicines.length+E.inventories.length+B.inventories.length+B.medicines.length}):null,Object(k.jsx)("p",{className:"d-lg-none d-md-block",children:"Notifications"}),Object(k.jsx)("div",{className:"ripple-container"})]}),Object(k.jsxs)("div",{className:"dropdown-menu dropdown-menu-right ".concat(Object(p.d)(y,"show")),children:[E.medicines.map((function(e,n){return Object(k.jsxs)(u.b,{to:"".concat(b.a.DASHBOARD).concat(b.a.MEDICINES,"/").concat(e.id,"/edit"),className:"dropdown-item",children:["Medicine '",e.description,"' is about to expire ",x()(e.expiry_date).fromNow(),"."]},n)})),E.inventories.map((function(e,n){return Object(k.jsxs)(u.b,{to:"".concat(b.a.DASHBOARD).concat(b.a.INVENTORIES,"/").concat(e.id,"/edit"),className:"dropdown-item",children:["Supply '",e.description,"' is about to expire ",x()(e.expiry_date).fromNow(),"."]},n)})),B.medicines.map((function(e,n){return Object(k.jsxs)(u.b,{to:"".concat(b.a.DASHBOARD).concat(b.a.MEDICINES,"/").concat(e.id,"/edit"),className:"dropdown-item",children:["Medicine '",e.description,"' is in it's critical value of ",e.available,"."]},n)})),B.inventories.map((function(e,n){return Object(k.jsxs)(u.b,{to:"".concat(b.a.DASHBOARD).concat(b.a.INVENTORIES,"/").concat(e.id,"/edit"),className:"dropdown-item",children:["Supply '",e.description,"' is in it's critical value of ",e.available,"."]},n)})),0===E.medicines.length&&0===E.inventories.length&&0===B.medicines.length&&0===B.inventories.length?Object(k.jsx)("a",{className:"dropdown-item",href:"/",onClick:function(e){return e.preventDefault()},children:"No Notifications"}):null]})]}),Object(k.jsxs)("li",{className:"nav-item dropdown",children:[Object(k.jsxs)("a",{className:"nav-link",href:"/",onClick:function(e){e.preventDefault(),f(!h)},children:[Object(k.jsx)("i",{className:"material-icons",children:"person"}),Object(k.jsx)("p",{className:"d-lg-none d-md-block",children:"Account"})]}),Object(k.jsxs)("div",{className:"dropdown-menu dropdown-menu-right ".concat(Object(p.d)(h,"show")),children:[Object(k.jsx)(u.b,{className:"dropdown-item",to:(n=b.a.PROFILE,"".concat(M.path).concat(n)),children:"Profile"}),Object(k.jsx)("div",{className:"dropdown-divider"}),Object(k.jsx)("a",{className:"dropdown-item",href:"/",onClick:function(e){e.preventDefault(),T()},children:"Logout"})]})]})]})]})]})})}},86:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return o}));var a=t(22),c=t(23),i=function(){function e(n){Object(a.a)(this,e),this.key=void 0,this.key=n}return Object(c.a)(e,[{key:"getKey",value:function(){return this.key}}]),e}(),s=function(){function e(){Object(a.a)(this,e),this.callbacks={}}return Object(c.a)(e,[{key:"dispatch",value:function(e,n){return e in this.callbacks?(this.callbacks[e].forEach((function(e){return e(n)})),this):this}},{key:"listen",value:function(e,n){return e in this.callbacks||(this.callbacks[e]=[]),new i(this.callbacks[e].push(n)-1)}},{key:"unlisten",value:function(e,n){e in this.callbacks&&this.callbacks[e].splice(n.getKey(),1)}}]),e}(),r=new s,o=new s}}]);
//# sourceMappingURL=21.eb520a28.chunk.js.map