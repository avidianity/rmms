{"version":3,"sources":["Components/Modal.tsx","Components/Pharmacy/Prescriptions/List.tsx","Components/Pharmacy/Prescriptions/View.tsx","Components/Pharmacy/Prescriptions/index.tsx","Components/Table.tsx","classes.ts","events.ts","Components/Pagination.tsx","contants.ts"],"names":["forwardRef","ref","title","id","children","buttons","className","tabIndex","role","type","data-dismiss","aria-label","aria-hidden","List","props","useState","prescriptions","setPrescriptions","makeDummyPagination","pagination","setPagination","match","useRouteMatch","url","path","fetchPrescriptions","a","page","state","get","axios","data","set","current_page","handleError","search","keyword","encodeURIComponent","console","log","toJSON","toastr","error","user","useEffect","key","SearchBus","listen","length","unlisten","Table","head","colSpan","foot","Pagination","onChange","map","index","released_at","recordable","recordable_type","doctor","doctor_id","patient","name","RecordableMap","split","dayjs","case_number","format","to","View","prescription","setPrescription","useParams","history","useHistory","Date","released","setReleased","releasing","setReleasing","modalRef","createRef","fetchPrescription","goBack","markAsDelivered","put","success","disabled","onClick","e","preventDefault","current","$","modal","diagnosis","items","item","medicine","description","quantity","Modal","data-enable-time","value","dates","Prescriptions","exact","component","subtitles","Symbol","this","EventBus","callbacks","forEach","callback","push","symbol","splice","getKey","MainBus","small","links","filter","link","Number","isInteger","label","handleClick","total","per_page","outIf","toBool","prev_page_url","href","active","next_page_url","Record","PrenatalRecord","STATUSES","RegularRecord","Immunization","fields","properties"],"mappings":"sGAAA,kBAQeA,0BAAqD,WAAmCC,GAAnC,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,GAAIC,EAAd,EAAcA,SAAUC,EAAxB,EAAwBA,QAAxB,OACnE,qBAAKF,GAAIA,EAAIG,UAAU,aAAaC,UAAW,EAAGC,KAAK,SAASP,IAAKA,EAArE,SACC,qBAAKK,UAAU,8CAA8CE,KAAK,WAAlE,SACC,sBAAKF,UAAU,gBAAf,UACC,sBAAKA,UAAU,eAAf,UACC,oBAAIA,UAAU,cAAd,SAA6BJ,IAC7B,wBAAQO,KAAK,SAASH,UAAU,QAAQI,eAAa,QAAQC,aAAW,QAAxE,SACC,sBAAMC,cAAY,OAAlB,uBAGF,qBAAKN,UAAU,aAAf,SAA6BF,IAC7B,sBAAKE,UAAU,eAAf,UACED,EACD,yBAAQI,KAAK,SAASH,UAAU,yBAAyBI,eAAa,QAAtE,UACC,mBAAGJ,UAAU,iBAAb,mBADD,yB,yMCgGUO,EApGS,SAACC,GAAW,IAAD,EACQC,mBAAyB,IADjC,mBAC3BC,EAD2B,KACZC,EADY,OAEEF,mBAAoBG,eAFtB,mBAE3BC,EAF2B,KAEfC,EAFe,KAG5BC,EAAQC,cAERC,EAAM,SAACC,GAAD,gBAAqBH,EAAMG,MAA3B,OAAkCA,IAExCC,EAAkB,uCAAG,WAAOF,GAAP,mBAAAG,EAAA,sEAEnBC,EAAOC,IAAMC,IAAY,sBAAwB,EAF9B,SAGFC,IAAMD,IAA6BN,GAAG,uCAAyCI,IAH7E,gBAGjBI,EAHiB,EAGjBA,KACRd,EAAiBc,EAAKA,MACtBX,EAAcW,GACdH,IAAMI,IAAI,oBAAqBD,EAAKE,cANX,kDAQzBC,YAAY,EAAD,IARc,0DAAH,sDAsBlBC,EAAM,uCAAG,WAAOC,GAAP,iBAAAV,EAAA,+EAEUI,IAAMD,IAAN,6CAAgDQ,mBAAmBD,GAAnE,oBAFV,gBAELL,EAFK,EAELA,KACRd,EAAiBc,GACjBX,EAAcF,eAJD,gDAMboB,QAAQC,IAAI,KAAMC,UAClBC,IAAOC,MAAM,qBAPA,yDAAH,sDAWNC,EAAOf,IAAMC,IAAU,QAiB7B,OAfAe,qBAAU,WACTnB,IACA,IAAMoB,EAAMC,IAAUC,OAAe,UAAU,SAACX,GAC3CA,EAAQY,OAAS,EACpBb,EAAOC,GAEPX,OAGF,OAAO,WACNqB,IAAUG,SAAS,SAAUJ,MAG5B,IAGF,mCACC,cAACK,EAAA,EAAD,CACChD,MAAM,gBACNiD,KAAM,kBACL,+BACC,oCACA,yCACA,wCACA,gDACA,6CACA,0CACA,oBAAIC,QAAS,EAAb,yBAGFC,KAAM,kBAAM,cAACC,EAAA,EAAD,CAAYnC,WAAYA,EAAYoC,SAAU,SAAChC,GAAD,OAASE,EAAmBF,OAbvF,SAcEP,EAAcwC,KAAI,WAAsEC,GAAtE,MAAGtD,EAAH,EAAGA,GAAIuD,EAAP,EAAOA,YAAaC,EAApB,EAAoBA,WAAYC,EAAhC,EAAgCA,gBAAiBC,EAAjD,EAAiDA,OAAQC,EAAzD,EAAyDA,UAAzD,OAClB,+BACC,6BAAK3D,IACL,oCAAKwD,QAAL,IAAKA,GAAL,UAAKA,EAAYI,eAAjB,aAAK,EAAqBC,OAC1B,oCAAKH,QAAL,IAAKA,OAAL,EAAKA,EAAQG,OACb,6BAAKC,IAAcL,EAAgBM,MAAM,MAAM,MAC/C,6BAAKC,IAAK,OAACR,QAAD,IAACA,OAAD,EAACA,EAAYS,aAAcC,OAAO,mBAC5C,6BAAKX,EAAcS,IAAMT,GAAaW,OAAO,yBAA2B,QACxE,+BACC,eAAC,IAAD,CAAMC,GAAI/C,EAAI,IAAD,OAAKpB,IAAOG,UAAU,sBAAsBJ,MAAM,OAA/D,UACC,mBAAGI,UAAU,sBAAb,wBADD,UAIiB,OAAhBoD,GAAwBI,IAAcnB,EAAKxC,GAC3C,eAAC,IAAD,CAAMmE,GAAI/C,EAAI,IAAD,OAAKpB,EAAL,UAAiBG,UAAU,yBAAyBJ,MAAM,OAAvE,UACC,mBAAGI,UAAU,sBAAb,oBADD,UAIG,UAjBGmD,W,0BCmECc,EA7IS,SAACzD,GAAW,IAAD,UACMC,mBAA8B,MADpC,mBAC3ByD,EAD2B,KACbC,EADa,KAE1BtE,EAAOuE,cAAPvE,GACFwE,EAAUC,cAHkB,EAIF7D,mBAAS,IAAI8D,MAJX,mBAI3BC,EAJ2B,KAIjBC,EAJiB,OAKAhE,oBAAS,GALT,mBAK3BiE,EAL2B,KAKhBC,EALgB,KAM5BC,EAAWC,sBAEXxC,EAAOf,IAAMC,IAAU,QAEvBuD,EAAiB,uCAAG,WAAOjF,GAAP,iBAAAuB,EAAA,+EAEDI,IAAMD,IAAN,kCAAqC1B,IAFpC,gBAEhB4B,EAFgB,EAEhBA,KACR0C,EAAgB1C,GAHQ,gDAKxBG,YAAY,EAAD,IACXyC,EAAQU,SANgB,yDAAH,sDAUjBC,EAAe,uCAAG,8BAAA5D,EAAA,6DACvBuD,GAAa,GADU,kBAGCnD,IAAMyD,IAAN,kCAAqCpF,GAAM,CACjEuD,YAAaoB,EAAStC,WAJD,gBAGdT,EAHc,EAGdA,KAGR0C,EAAgB1C,GAChBU,IAAO+C,QAAQ,mCAAoC,YAP7B,kDAStBtD,YAAY,EAAD,IATW,yBAWtB+C,GAAa,GAXS,6EAAH,qDAoBrB,OALArC,qBAAU,WACTwC,EAAkBjF,KAEhB,IAGF,sBAAKG,UAAU,kBAAf,UACC,sBAAKA,UAAU,OAAf,UACC,sBAAKA,UAAU,4DAAf,UACC,oBAAIA,UAAU,aAAd,+BACgB,gBAAX,OAAJqC,QAAI,IAAJA,OAAA,EAAAA,EAAMnC,MACN,yBACCF,UAAU,8BACVmF,SAAUT,GAA2C,QAAlB,OAAZR,QAAY,IAAZA,OAAA,EAAAA,EAAcd,aACrCgC,QAAS,SAACC,GACTA,EAAEC,iBACEV,EAASW,SAAyC,QAAlB,OAAZrB,QAAY,IAAZA,OAAA,EAAAA,EAAcd,cACrCoC,EAAEZ,EAASW,SAASE,MAAM,SAN7B,UASC,mBAAGzF,UAAU,sBAAb,4BAC+B,QAAlB,OAAZkE,QAAY,IAAZA,OAAA,EAAAA,EAAcd,aAAuB,mBAAqB,cAEzD,QAEL,sBAAKpD,UAAU,YAAf,UACC,oBAAGA,UAAU,YAAb,6BAAmCkE,QAAnC,IAAmCA,GAAnC,UAAmCA,EAAcb,kBAAjD,iBAAmC,EAA0BI,eAA7D,aAAmC,EAAmCC,QACtE,oBAAG1D,UAAU,YAAb,4BAAkCkE,QAAlC,IAAkCA,GAAlC,UAAkCA,EAAcX,cAAhD,aAAkC,EAAsBG,QACxD,oBAAG1D,UAAU,YAAb,sBACsB,OAAZkE,QAAY,IAAZA,OAAA,EAAAA,EAAcd,aAAcS,IAAK,OAACK,QAAD,IAACA,OAAD,EAACA,EAAcd,aAAaW,OAAO,yBAA2B,aAEzG,qBAAK/D,UAAU,kBAAf,SACC,sBAAKA,UAAU,OAAf,UACC,qBAAKA,UAAU,cAAf,SACC,oBAAIA,UAAU,aAAd,kCAED,sBAAKA,UAAU,YAAf,UACC,oBAAGA,UAAU,YAAb,kBACO,KACO,OAAZkE,QAAY,IAAZA,OAAA,EAAAA,EAAcZ,iBAAkBK,IAAcO,EAAaZ,gBAAgBM,MAAM,MAAM,IAAM,QAE/F,oBAAG5D,UAAU,YAAb,yBACc,KACA,OAAZkE,QAAY,IAAZA,OAAA,EAAAA,EAAcb,YAAaQ,IAAMK,EAAab,WAAWS,aAAaC,OAAO,iBAAmB,SAErF,OAAZG,QAAY,IAAZA,OAAA,EAAAA,EAAcZ,kBAAoE,mBAAjDK,IAAa,OAACO,QAAD,IAACA,OAAD,EAACA,EAAcZ,iBAC7D,oBAAGtD,UAAU,YAAb,yBAAqC,OAACkE,QAAD,IAACA,OAAD,EAACA,EAAcb,YAAsBqC,aACvE,aAIP,qBAAK1F,UAAU,kBAAf,SACC,cAAC4C,EAAA,EAAD,CACChD,MAAM,QACNiD,KAAM,kBACL,+BACC,oCACA,0CACA,8CANH,gBASEqB,QATF,IASEA,GATF,UASEA,EAAcyB,aAThB,aASE,EAAqBzC,KAAI,SAAC0C,EAAMzC,GAAP,aACzB,+BACC,6BAAKyC,EAAK/F,KACV,uCAAK+F,EAAKC,gBAAV,aAAK,EAAeC,cACpB,6BAAKF,EAAKG,aAHF5C,gBAUd,cAAC6C,EAAA,EAAD,CACCrG,IAAKiF,EACLhF,MAAM,gCACNG,QACC,wBACCC,UAAU,yBACVmF,SAAUT,EACVU,QAAS,SAACC,GACTA,EAAEC,iBACFN,IACIJ,EAASW,SACZC,EAAEZ,EAASW,SAASE,MAAM,SAP7B,SAUEf,EAAY,mBAAG1E,UAAU,sBAAb,qBAAiD,WAdjE,SAiBC,sBAAKA,UAAU,sCAAf,UACC,uBAAOA,UAAU,qBAAjB,2BACA,cAAC,IAAD,CACCA,UAAU,eACViG,oBAAA,EACAC,MAAO1B,EACPvB,SAAU,SAACkD,GACV1B,EAAY0B,EAAM,KAEnBhB,SAAUT,aClID0B,UAbkB,SAAC5F,GACjC,IAAMO,EAAQC,cAERC,EAAM,SAACC,GAAD,gBAAqBH,EAAMG,MAA3B,OAAkCA,IAE9C,OACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOA,KAAMD,EAAI,IAAKoF,OAAK,EAACC,UAAW/F,IACvC,cAAC,IAAD,CAAOW,KAAMD,EAAI,QAASoF,OAAK,EAACC,UAAWrC,S,gCCf9C,gBA8BerB,IApBU,SAAC,GAA2D,IAAzDhD,EAAwD,EAAxDA,MAAO2G,EAAiD,EAAjDA,UAAW1D,EAAsC,EAAtCA,KAAM/C,EAAgC,EAAhCA,SAAUiD,EAAsB,EAAtBA,KAAM/C,EAAgB,EAAhBA,UACnE,OACC,sBAAKA,UAAS,eAAUA,GAAxB,UACC,sBAAKA,UAAU,kCAAf,UACC,oBAAIA,UAAU,aAAd,SAA4BJ,IAC3B2G,EAAY,mBAAGvG,UAAU,gBAAb,SAA8BuG,IAAiB,QAE7D,qBAAKvG,UAAU,YAAf,SACC,qBAAKA,UAAU,mBAAf,SACC,wBAAOA,UAAU,QAAjB,UACC,uBAAOA,UAAU,eAAjB,SAAiC6C,MACjC,gCAAQ/C,WAIViD,EAAO,qBAAK/C,UAAU,cAAf,SAA8B+C,MAAgB,U,wHCzB5CyD,EAAb,WAGC,WAAYV,GAAsB,yBAFxBvD,SAEuB,EAChCkE,KAAKlE,IAAMuD,EAJb,0CAOC,WACC,OAAOW,KAAKlE,QARd,KAYamE,EAAb,iDACWC,UAA2C,GADtD,4CAGC,SAASpE,EAAa2D,GACrB,OAAM3D,KAAOkE,KAAKE,WAIlBF,KAAKE,UAAUpE,GAAKqE,SAAQ,SAACC,GAAD,OAAcA,EAASX,MAE5CO,MALCA,OALV,oBAaC,SAAUlE,EAAasE,GAKtB,OAJMtE,KAAOkE,KAAKE,YACjBF,KAAKE,UAAUpE,GAAO,IAGhB,IAAIiE,EAAOC,KAAKE,UAAUpE,GAAKuE,KAAKD,GAAY,KAlBzD,sBAqBC,SAAStE,EAAawE,GACfxE,KAAOkE,KAAKE,WAGlBF,KAAKE,UAAUpE,GAAKyE,OAAOD,EAAOE,SAAU,OAzB9C,KCVazE,EAAY,IAAIkE,EAEhBQ,EAAU,IAAIR,G,gCCJ3B,0DAUe,SAAS1D,EAAT,GAA6D,IAAvCnC,EAAsC,EAAtCA,WAAYoC,EAA0B,EAA1BA,SAAUkE,EAAgB,EAAhBA,MACpDC,EAAQvG,EAAWuG,MAAMC,QAAO,SAACC,GAAD,OAAUC,OAAOC,UAAUD,OAAOD,EAAKG,WAEvEC,EAAc,SAACzG,GACpB,OAAO,SAACoE,GACPA,EAAEC,iBACErE,GACHgC,EAAShC,KAKZ,OAAIJ,EAAW8G,OAAS9G,EAAW+G,SAC3B,KAIP,qBAAKvH,aAAW,kBAAhB,SACC,qBAAIL,UAAS,qBAAgB6H,YAAMC,YAAOX,GAAQ,kBAAlD,UACC,oBAAInH,UAAS,oBAAe6H,YAAmC,OAA7BhH,EAAWkH,cAAwB,aAArE,SACC,oBAAG/H,UAAU,YAAYgI,KAAI,UAAKnH,EAAWkH,eAAiB3C,QAASsC,EAAY7G,EAAWkH,eAA9F,UACC,sBAAMzH,cAAY,OAAlB,eACA,sBAAMN,UAAU,UAAhB,2BAGDoH,EAAMlE,KAAI,WAAyBC,GAAzB,IAAG8E,EAAH,EAAGA,OAAQR,EAAX,EAAWA,MAAOxG,EAAlB,EAAkBA,IAAlB,OACV,oBAAIjB,UAAS,oBAAe6H,YAAMI,EAAQ,WAA1C,SACC,mBAAGjI,UAAU,YAAYgI,KAAI,UAAK/G,GAAOmE,QAASsC,EAAYzG,GAA9D,SACEwG,KAFyDtE,MAM7D,oBAAInD,UAAS,oBAAe6H,YAAmC,OAA7BhH,EAAWqH,cAAwB,aAArE,SACC,oBAAGlI,UAAU,YAAYgI,KAAI,UAAKnH,EAAWqH,eAAiB9C,QAASsC,EAAY7G,EAAWqH,eAA9F,UACC,sBAAM5H,cAAY,OAAlB,eACA,sBAAMN,UAAU,UAAhB,8B,gCC3CN,oEAAO,IAIM2D,EAAgB,CAC5BwE,OAAQ,iBACRC,eAAgB,mBAGJC,EAAW,CACvBC,cAAe,CAAC,UAAW,QAC3BF,eAAgB,CAAC,UAAW,QAC5BG,aAAc,CACbC,OAAQ,CACP,CAAEjG,IAAK,MAAOmB,KAAM,OACpB,CAAEnB,IAAK,QAASmB,KAAM,SACtB,CAAEnB,IAAK,MAAOmB,KAAM,OACpB,CAAEnB,IAAK,SAAUmB,KAAM,UACvB,CAAEnB,IAAK,MAAOmB,KAAM,OACpB,CAAEnB,IAAK,UAAWmB,KAAM,WACxB,CAAEnB,IAAK,QAASmB,KAAM,UAEvB+E,WAAY,CAAC,WAAY,YAAa,iBAAkB","file":"static/js/6.c2e2f4c1.chunk.js","sourcesContent":["import React, { forwardRef, PropsWithChildren } from 'react';\n\ntype Props = {\n\tid?: string;\n\ttitle: string;\n\tbuttons?: JSX.Element;\n};\n\nexport default forwardRef<HTMLDivElement, PropsWithChildren<Props>>(({ title, id, children, buttons }, ref) => (\n\t<div id={id} className='modal fade' tabIndex={-1} role='dialog' ref={ref}>\n\t\t<div className='modal-dialog modal-lg modal-dialog-centered' role='document'>\n\t\t\t<div className='modal-content'>\n\t\t\t\t<div className='modal-header'>\n\t\t\t\t\t<h5 className='modal-title'>{title}</h5>\n\t\t\t\t\t<button type='button' className='close' data-dismiss='modal' aria-label='Close'>\n\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className='modal-body'>{children}</div>\n\t\t\t\t<div className='modal-footer'>\n\t\t\t\t\t{buttons}\n\t\t\t\t\t<button type='button' className='btn btn-primary btn-sm' data-dismiss='modal'>\n\t\t\t\t\t\t<i className='material-icons'>close</i>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n));\n","import axios from 'axios';\nimport dayjs from 'dayjs';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { RecordableMap } from '../../../contants';\nimport { Paginated } from '../../../Contracts/misc';\nimport { Prescription } from '../../../Contracts/Prescription';\nimport { makeDummyPagination, handleError } from '../../../helpers';\nimport state from '../../../state';\nimport Pagination from '../../Pagination';\nimport Table from '../../Table';\nimport { User } from '../../../Contracts/User';\nimport toastr from 'toastr';\nimport { SearchBus } from '../../../events';\n\ntype Props = {};\n\nconst List: FC<Props> = (props) => {\n\tconst [prescriptions, setPrescriptions] = useState<Prescription[]>([]);\n\tconst [pagination, setPagination] = useState<Paginated>(makeDummyPagination());\n\tconst match = useRouteMatch();\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\tconst fetchPrescriptions = async (url?: string) => {\n\t\ttry {\n\t\t\tconst page = state.get<number>('prescription-page') || 1;\n\t\t\tconst { data } = await axios.get<Paginated<Prescription>>(url ? url : `/pharmacy/prescriptions?page=${page}`);\n\t\t\tsetPrescriptions(data.data);\n\t\t\tsetPagination(data);\n\t\t\tstate.set('prescription-page', data.current_page);\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t}\n\t};\n\n\t// const deletePrescription = async (id: any) => {\n\t// \ttry {\n\t// \t\tawait axios.delete(`/pharmacy/prescriptions/${id}`);\n\t// \t\ttoastr.info('Prescription has been deleted.', 'Notice');\n\t// \t\tfetchPrescriptions();\n\t// \t} catch (error) {\n\t// \t\thandleError(error);\n\t// \t}\n\t// };\n\n\tconst search = async (keyword: string) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/search?model=Prescription&keyword=${encodeURIComponent(keyword)}&paginate=false`);\n\t\t\tsetPrescriptions(data);\n\t\t\tsetPagination(makeDummyPagination());\n\t\t} catch (error) {\n\t\t\tconsole.log(error.toJSON());\n\t\t\ttoastr.error('Unable to search.');\n\t\t}\n\t};\n\n\tconst user = state.get<User>('user');\n\n\tuseEffect(() => {\n\t\tfetchPrescriptions();\n\t\tconst key = SearchBus.listen<string>('submit', (keyword) => {\n\t\t\tif (keyword.length > 0) {\n\t\t\t\tsearch(keyword);\n\t\t\t} else {\n\t\t\t\tfetchPrescriptions();\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tSearchBus.unlisten('submit', key);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Table\n\t\t\t\ttitle='Prescriptions'\n\t\t\t\thead={() => (\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t<th>Patient</th>\n\t\t\t\t\t\t<th>Doctor</th>\n\t\t\t\t\t\t<th>Type of Record</th>\n\t\t\t\t\t\t<th>Case Number</th>\n\t\t\t\t\t\t<th>Released</th>\n\t\t\t\t\t\t<th colSpan={3}>Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t)}\n\t\t\t\tfoot={() => <Pagination pagination={pagination} onChange={(url) => fetchPrescriptions(url)} />}>\n\t\t\t\t{prescriptions.map(({ id, released_at, recordable, recordable_type, doctor, doctor_id }, index) => (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td>{id}</td>\n\t\t\t\t\t\t<td>{recordable?.patient?.name}</td>\n\t\t\t\t\t\t<td>{doctor?.name}</td>\n\t\t\t\t\t\t<td>{RecordableMap[recordable_type.split('\\\\')[2]]}</td>\n\t\t\t\t\t\t<td>{dayjs(recordable?.case_number!).format('MMMM DD, YYYY')}</td>\n\t\t\t\t\t\t<td>{released_at ? dayjs(released_at).format('MMMM DD, YYYY hh:mm A') : 'N/A'}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<Link to={url(`/${id}`)} className='btn btn-info btn-sm' title='View'>\n\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>visibility</i>\n\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{released_at === null && doctor_id === user.id ? (\n\t\t\t\t\t\t\t\t<Link to={url(`/${id}/edit`)} className='btn btn-warning btn-sm' title='Edit'>\n\t\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>create</i>\n\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</Table>\n\t\t</>\n\t);\n};\n\nexport default List;\n","import axios from 'axios';\nimport dayjs from 'dayjs';\nimport React, { createRef, FC, useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router';\nimport toastr from 'toastr';\nimport { RecordableMap } from '../../../contants';\nimport { Prescription } from '../../../Contracts/Prescription';\nimport { Record } from '../../../Contracts/Record';\nimport { handleError } from '../../../helpers';\nimport Modal from '../../Modal';\nimport Table from '../../Table';\nimport Flatpickr from 'react-flatpickr';\nimport state from '../../../state';\nimport { User } from '../../../Contracts/User';\n\ntype Props = {};\n\nconst View: FC<Props> = (props) => {\n\tconst [prescription, setPrescription] = useState<Prescription | null>(null);\n\tconst { id } = useParams<{ id: string }>();\n\tconst history = useHistory();\n\tconst [released, setReleased] = useState(new Date());\n\tconst [releasing, setReleasing] = useState(false);\n\tconst modalRef = createRef<HTMLDivElement>();\n\n\tconst user = state.get<User>('user');\n\n\tconst fetchPrescription = async (id: any) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/pharmacy/prescriptions/${id}`);\n\t\t\tsetPrescription(data);\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t\thistory.goBack();\n\t\t}\n\t};\n\n\tconst markAsDelivered = async () => {\n\t\tsetReleasing(true);\n\t\ttry {\n\t\t\tconst { data } = await axios.put(`/pharmacy/prescriptions/${id}`, {\n\t\t\t\treleased_at: released.toJSON(),\n\t\t\t});\n\t\t\tsetPrescription(data);\n\t\t\ttoastr.success('Prescription marked as Released.', 'Success!');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t} finally {\n\t\t\tsetReleasing(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchPrescription(id);\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<div className='container-fluid'>\n\t\t\t<div className='card'>\n\t\t\t\t<div className='card-header card-header-success d-flex align-items-center'>\n\t\t\t\t\t<h4 className='card-title'>View Prescription</h4>\n\t\t\t\t\t{user?.role === 'Pharmacist' ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='btn btn-info btn-sm ml-auto'\n\t\t\t\t\t\t\tdisabled={releasing || prescription?.released_at !== null}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (modalRef.current && prescription?.released_at === null) {\n\t\t\t\t\t\t\t\t\t$(modalRef.current).modal('show');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<i className='material-icons mr-1'>local_shipping</i>\n\t\t\t\t\t\t\t{prescription?.released_at === null ? 'Mark as Released' : 'Released'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className='card-body'>\n\t\t\t\t\t<p className='card-text'>Patient: {prescription?.recordable?.patient?.name}</p>\n\t\t\t\t\t<p className='card-text'>Doctor: {prescription?.doctor?.name}</p>\n\t\t\t\t\t<p className='card-text'>\n\t\t\t\t\t\tStatus: {prescription?.released_at ? dayjs(prescription?.released_at).format('MMMM DD, YYYY hh:mm A') : 'Pending'}\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className='container-fluid'>\n\t\t\t\t\t\t<div className='card'>\n\t\t\t\t\t\t\t<div className='card-header'>\n\t\t\t\t\t\t\t\t<h6 className='card-title'>Record Information</h6>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<p className='card-text'>\n\t\t\t\t\t\t\t\t\tType:{' '}\n\t\t\t\t\t\t\t\t\t{prescription?.recordable_type ? RecordableMap[prescription.recordable_type.split('\\\\')[2]] : null}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className='card-text'>\n\t\t\t\t\t\t\t\t\tCase Number:{' '}\n\t\t\t\t\t\t\t\t\t{prescription?.recordable ? dayjs(prescription.recordable.case_number).format('MMMM DD, YYYY') : null}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{prescription?.recordable_type && RecordableMap[prescription?.recordable_type] === 'Regular Record' ? (\n\t\t\t\t\t\t\t\t\t<p className='card-text'>Diagnosis: {(prescription?.recordable as Record).diagnosis}</p>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='container-fluid'>\n\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\ttitle='Items'\n\t\t\t\t\t\t\thead={() => (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t\t\t\t<th>Medicine</th>\n\t\t\t\t\t\t\t\t\t<th>Quantity</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)}>\n\t\t\t\t\t\t\t{prescription?.items?.map((item, index) => (\n\t\t\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t\t\t<td>{item.id}</td>\n\t\t\t\t\t\t\t\t\t<td>{item.medicine?.description}</td>\n\t\t\t\t\t\t\t\t\t<td>{item.quantity}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Modal\n\t\t\t\tref={modalRef}\n\t\t\t\ttitle='Mark Prescription as Released'\n\t\t\t\tbuttons={\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='btn btn-success btn-sm'\n\t\t\t\t\t\tdisabled={releasing}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tmarkAsDelivered();\n\t\t\t\t\t\t\tif (modalRef.current) {\n\t\t\t\t\t\t\t\t$(modalRef.current).modal('hide');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{releasing ? <i className='material-icons spin'>refresh</i> : 'Submit'}\n\t\t\t\t\t</button>\n\t\t\t\t}>\n\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t<label className='bmd-label-floating'>Date and Time</label>\n\t\t\t\t\t<Flatpickr\n\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\tdata-enable-time\n\t\t\t\t\t\tvalue={released}\n\t\t\t\t\t\tonChange={(dates) => {\n\t\t\t\t\t\t\tsetReleased(dates[0]);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={releasing}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n};\n\nexport default View;\n","import React, { FC } from 'react';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\nimport List from './List';\nimport View from './View';\n\ntype Props = {};\n\nconst Prescriptions: FC<Props> = (props) => {\n\tconst match = useRouteMatch();\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route path={url('')} exact component={List} />\n\t\t\t<Route path={url('/:id')} exact component={View} />\n\t\t</Switch>\n\t);\n};\n\nexport default Prescriptions;\n","import React, { FC } from 'react';\n\ntype Props = {\n\ttitle: string;\n\tsubtitles?: string;\n\thead: () => JSX.Element;\n\tfoot?: () => JSX.Element;\n\tclassName?: string;\n};\n\nconst Table: FC<Props> = ({ title, subtitles, head, children, foot, className }) => {\n\treturn (\n\t\t<div className={`card ${className}`}>\n\t\t\t<div className='card-header card-header-success'>\n\t\t\t\t<h4 className='card-title'>{title}</h4>\n\t\t\t\t{subtitles ? <p className='card-category'>{subtitles}</p> : null}\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<div className='table-responsive'>\n\t\t\t\t\t<table className='table'>\n\t\t\t\t\t\t<thead className='text-success'>{head()}</thead>\n\t\t\t\t\t\t<tbody>{children}</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{foot ? <div className='card-footer'>{foot()}</div> : null}\n\t\t</div>\n\t);\n};\n\nexport default Table;\n","export class Symbol {\n\tprotected key: number;\n\n\tconstructor(description: number) {\n\t\tthis.key = description;\n\t}\n\n\tgetKey() {\n\t\treturn this.key;\n\t}\n}\n\nexport class EventBus {\n\tprotected callbacks: { [key: string]: Function[] } = {};\n\n\tdispatch(key: string, value?: any) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.callbacks[key].forEach((callback) => callback(value));\n\n\t\treturn this;\n\t}\n\n\tlisten<T>(key: string, callback: (args: T) => void) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\tthis.callbacks[key] = [];\n\t\t}\n\n\t\treturn new Symbol(this.callbacks[key].push(callback) - 1);\n\t}\n\n\tunlisten(key: string, symbol: Symbol) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.callbacks[key].splice(symbol.getKey(), 1);\n\t}\n}\n","import { EventBus } from './classes';\n\nexport const SearchBus = new EventBus();\n\nexport const MainBus = new EventBus();\n","import React from 'react';\nimport { Paginated } from '../Contracts/misc';\nimport { outIf, toBool } from '../helpers';\n\ntype Props = {\n\tpagination: Paginated<any>;\n\tonChange: (url: string) => void;\n\tsmall?: boolean;\n};\n\nexport default function Pagination({ pagination, onChange, small }: Props) {\n\tconst links = pagination.links.filter((link) => Number.isInteger(Number(link.label)));\n\n\tconst handleClick = (url: string | null) => {\n\t\treturn (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\te.preventDefault();\n\t\t\tif (url) {\n\t\t\t\tonChange(url);\n\t\t\t}\n\t\t};\n\t};\n\n\tif (pagination.total <= pagination.per_page) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<nav aria-label='Page Navigation'>\n\t\t\t<ul className={`pagination ${outIf(toBool(small), 'pagination-sm')}`}>\n\t\t\t\t<li className={`page-item ${outIf(pagination.prev_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.prev_page_url}`} onClick={handleClick(pagination.prev_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&lt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Previous</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t{links.map(({ active, label, url }, index) => (\n\t\t\t\t\t<li className={`page-item ${outIf(active, 'active')}`} key={index}>\n\t\t\t\t\t\t<a className='page-link' href={`${url}`} onClick={handleClick(url)}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t\t<li className={`page-item ${outIf(pagination.next_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.next_page_url}`} onClick={handleClick(pagination.next_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&gt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Next</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n","import { FreeObject } from './Contracts/misc';\n\nexport const EMAIL_REGEX = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nexport const URL_REGEX = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\n\nexport const RecordableMap = {\n\tRecord: 'Regular Record',\n\tPrenatalRecord: 'Prenatal Record',\n} as FreeObject;\n\nexport const STATUSES = {\n\tRegularRecord: ['Pending', 'Done'],\n\tPrenatalRecord: ['Pending', 'Done'],\n\tImmunization: {\n\t\tfields: [\n\t\t\t{ key: 'bcg', name: 'BCG' },\n\t\t\t{ key: 'penta', name: 'Penta' },\n\t\t\t{ key: 'opv', name: 'OPV' },\n\t\t\t{ key: 'hepa_b', name: 'Hepa B' },\n\t\t\t{ key: 'mmr', name: 'MMR' },\n\t\t\t{ key: 'measles', name: 'Measles' },\n\t\t\t{ key: 'other', name: 'Other' },\n\t\t],\n\t\tproperties: ['at_birth', 'six_weeks', 'fourteen_weeks', 'nine_months'],\n\t},\n};\n"],"sourceRoot":""}