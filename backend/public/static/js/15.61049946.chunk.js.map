{"version":3,"sources":["Components/Pharmacy/Medicine/Form.tsx","Components/Pharmacy/Medicine/List.tsx","Components/Pharmacy/Medicine/index.tsx","Components/Table.tsx","classes.ts","events.ts","Components/Pagination.tsx"],"names":["Form","props","useState","processing","setProcessing","mode","setMode","id","setID","dateDelivered","setDateDelivered","expiryDate","setExpiryDate","useForm","register","handleSubmit","setValue","match","useRouteMatch","history","useHistory","submit","data","a","date_delivered","toJSON","expiry_date","Date","axios","post","put","toastr","success","handleError","fetchMedicine","get","description","unit_of_issue","estimated_unit_cost","quantity","dayjs","toDate","critical_value","$","addClass","goBack","useEffect","path","includes","params","className","style","color","onSubmit","ref","type","disabled","name","value","undefined","onChange","dates","List","medicines","setMedicines","makeDummyPagination","pagination","setPagination","url","fetchMedicines","page","state","set","current_page","search","keyword","encodeURIComponent","console","log","error","key","SearchBus","listen","length","unlisten","user","role","to","Table","title","head","foot","Pagination","map","medicine","index","number_of_units","formatCurrency","format","released","available","estimated_cost","Medicine","exact","component","subtitles","children","Symbol","this","EventBus","callbacks","forEach","callback","push","symbol","splice","getKey","MainBus","small","links","filter","link","Number","isInteger","label","handleClick","e","preventDefault","total","per_page","aria-label","outIf","toBool","prev_page_url","href","onClick","aria-hidden","active","next_page_url"],"mappings":"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","file":"static/js/15.61049946.chunk.js","sourcesContent":["import axios from 'axios';\nimport dayjs from 'dayjs';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport toastr from 'toastr';\nimport { Medicine } from '../../../Contracts/Medicine';\nimport { handleError } from '../../../helpers';\nimport Flatpickr from 'react-flatpickr';\n\ntype Props = {};\n\nconst Form: FC<Props> = (props) => {\n\tconst [processing, setProcessing] = useState(false);\n\tconst [mode, setMode] = useState('Add');\n\tconst [id, setID] = useState<number>();\n\tconst [dateDelivered, setDateDelivered] = useState<Date | null>(null);\n\tconst [expiryDate, setExpiryDate] = useState<Date | null>(null);\n\tconst { register, handleSubmit, setValue } = useForm<Medicine>();\n\tconst match = useRouteMatch<{ id: string }>();\n\tconst history = useHistory();\n\n\tconst submit = async (data: Medicine) => {\n\t\tsetProcessing(true);\n\t\ttry {\n\t\t\tdata.date_delivered = dateDelivered?.toJSON() || null;\n\t\t\tdata.expiry_date = expiryDate?.toJSON() || new Date().toJSON();\n\t\t\tawait (mode === 'Add' ? axios.post(`/pharmacy/medicines`, data) : axios.put(`/pharmacy/medicines/${id}`, data));\n\t\t\ttoastr.success('Medicine saved successfully.');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t} finally {\n\t\t\tsetProcessing(false);\n\t\t}\n\t};\n\n\tconst fetchMedicine = async (id: any) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get<Medicine>(`/pharmacy/medicines/${id}`);\n\t\t\tsetValue('description', data.description);\n\t\t\tsetValue('unit_of_issue', data.unit_of_issue);\n\t\t\tsetValue('estimated_unit_cost', data.estimated_unit_cost);\n\t\t\tsetValue('quantity', data.quantity);\n\t\t\tsetDateDelivered(data.date_delivered ? dayjs(data.date_delivered).toDate() : null);\n\t\t\tsetExpiryDate(dayjs(data.expiry_date).toDate());\n\t\t\tsetValue('critical_value', data.critical_value);\n\t\t\tsetID(data.id);\n\t\t\t$('.form-group').addClass('is-filled');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t\thistory.goBack();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (match.path.includes('edit')) {\n\t\t\tsetMode('Edit');\n\t\t\tfetchMedicine(match.params.id);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<div className='card'>\n\t\t\t<div className='card-header card-header primary'>\n\t\t\t\t{mode} Medicine\n\t\t\t\t<p className='card-category'>Complete the form below</p>\n\t\t\t\t<p className='card-category'>\n\t\t\t\t\tFields with <span style={{ color: 'rgb(190, 0, 0)' }}>*</span> are required.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<form onSubmit={handleSubmit(submit)}>\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Description</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='text' className='form-control' disabled={processing} name='description' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Number of Units</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='number' className='form-control' disabled={processing} name='number_of_units' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Unit of Issue</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='text' className='form-control' disabled={processing} name='unit_of_issue' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Estimated Unit Cost</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='estimated_unit_cost'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Quantity</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='number' className='form-control' disabled={processing} name='quantity' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating'>Date Delivered</label>\n\t\t\t\t\t\t\t\t<Flatpickr\n\t\t\t\t\t\t\t\t\tvalue={dateDelivered || undefined}\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tonChange={(dates) => setDateDelivered(dates[0])}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Expiry Date</label>\n\t\t\t\t\t\t\t\t<Flatpickr\n\t\t\t\t\t\t\t\t\tvalue={expiryDate || undefined}\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tonChange={(dates) => setExpiryDate(dates[0])}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Critical Value</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='number' className='form-control' disabled={processing} name='critical_value' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12'>\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-info btn-sm' disabled={processing}>\n\t\t\t\t\t\t\t\t{processing ? <i className='material-icons spin'>refresh</i> : 'Save'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Form;\n","import axios from 'axios';\nimport React, { FC, useEffect, useState } from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { Medicine } from '../../../Contracts/Medicine';\nimport { Paginated } from '../../../Contracts/misc';\nimport { formatCurrency, handleError, makeDummyPagination } from '../../../helpers';\nimport Table from '../../Table';\nimport toastr from 'toastr';\nimport state from '../../../state';\nimport Pagination from '../../Pagination';\nimport { SearchBus } from '../../../events';\nimport { User } from '../../../Contracts/User';\nimport dayjs from 'dayjs';\n\ntype Props = {};\n\nconst List: FC<Props> = (props) => {\n\tconst [medicines, setMedicines] = useState<Medicine[]>([]);\n\tconst [pagination, setPagination] = useState<Paginated>(makeDummyPagination());\n\tconst match = useRouteMatch();\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\tconst fetchMedicines = async (url?: string) => {\n\t\ttry {\n\t\t\tconst page = state.get<number>('medicine-page') || 1;\n\t\t\tconst { data } = await axios.get<Paginated<Medicine>>(url ? url : `/pharmacy/medicines?page=${page}`);\n\t\t\tsetMedicines(data.data);\n\t\t\tsetPagination(data);\n\t\t\tstate.set('medicine-page', data.current_page);\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t}\n\t};\n\n\t// const deleteMedicine = async (id: any) => {\n\t// \ttry {\n\t// \t\tawait axios.delete(`/pharmacy/medicines/${id}`);\n\t// \t\ttoastr.info('Medicine has been deleted.', 'Notice');\n\t// \t\tfetchMedicines();\n\t// \t} catch (error) {\n\t// \t\thandleError(error);\n\t// \t}\n\t// };\n\n\tconst search = async (keyword: string) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/search?model=Medicine&keyword=${encodeURIComponent(keyword)}&paginate=false`);\n\t\t\tsetMedicines(data);\n\t\t\tsetPagination(makeDummyPagination());\n\t\t} catch (error) {\n\t\t\tconsole.log(error.toJSON());\n\t\t\ttoastr.error('Unable to search.');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchMedicines();\n\t\tconst key = SearchBus.listen<string>('submit', (keyword) => {\n\t\t\tif (keyword.length > 0) {\n\t\t\t\tsearch(keyword);\n\t\t\t} else {\n\t\t\t\tfetchMedicines();\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tSearchBus.unlisten('submit', key);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\tconst user = state.get<User>('user');\n\n\treturn (\n\t\t<>\n\t\t\t{!['Admin'].includes(user.role) ? (\n\t\t\t\t<Link to={url('/add')} className='btn btn-info btn-sm'>\n\t\t\t\t\tAdd New Medicine\n\t\t\t\t</Link>\n\t\t\t) : null}\n\t\t\t<Table\n\t\t\t\ttitle='Medicines'\n\t\t\t\thead={() => (\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t<th>Description</th>\n\t\t\t\t\t\t<th>Number of Units</th>\n\t\t\t\t\t\t<th>Unit of Issue</th>\n\t\t\t\t\t\t<th>Estimated Unit Cost</th>\n\t\t\t\t\t\t<th>Quantity</th>\n\t\t\t\t\t\t<th>Date Delivered</th>\n\t\t\t\t\t\t<th>Expiry Date</th>\n\t\t\t\t\t\t<th>Critical Value</th>\n\t\t\t\t\t\t<th>Released</th>\n\t\t\t\t\t\t<th>Available</th>\n\t\t\t\t\t\t<th>Estimated Cost</th>\n\t\t\t\t\t\t<th>Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t)}\n\t\t\t\tfoot={() => <Pagination pagination={pagination} onChange={(url) => fetchMedicines(url)} />}>\n\t\t\t\t{medicines.map((medicine, index) => (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td>{medicine.id}</td>\n\t\t\t\t\t\t<td>{medicine.description}</td>\n\t\t\t\t\t\t<td>{medicine.number_of_units}</td>\n\t\t\t\t\t\t<td>{medicine.unit_of_issue}</td>\n\t\t\t\t\t\t<td>{formatCurrency(medicine.estimated_unit_cost)}</td>\n\t\t\t\t\t\t<td>{medicine.quantity}</td>\n\t\t\t\t\t\t<td>{medicine.date_delivered ? dayjs(medicine.date_delivered).format('MMMM DD, YYYY') : 'N/A'}</td>\n\t\t\t\t\t\t<td>{dayjs(medicine.expiry_date).format('MMMM DD, YYYY')}</td>\n\t\t\t\t\t\t<td>{medicine.critical_value}</td>\n\t\t\t\t\t\t<td>{medicine.released}</td>\n\t\t\t\t\t\t<td>{medicine.available}</td>\n\t\t\t\t\t\t<td>{formatCurrency(medicine.estimated_cost)}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<Link to={url(`/${medicine.id}/edit`)} className='btn btn-warning btn-sm' title='Edit'>\n\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>create</i>\n\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{/* <a\n\t\t\t\t\t\t\t\thref={url(`/${medicine.id}/delete`)}\n\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm'\n\t\t\t\t\t\t\t\ttitle='Delete'\n\t\t\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tconst confirm = await swal({\n\t\t\t\t\t\t\t\t\t\ttitle: `Delete ${name}?`,\n\t\t\t\t\t\t\t\t\t\ticon: 'warning',\n\t\t\t\t\t\t\t\t\t\tbuttons: ['Cancel', 'Confirm'],\n\t\t\t\t\t\t\t\t\t\tdangerMode: true,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (confirm === true) {\n\t\t\t\t\t\t\t\t\t\tdeleteMedicine(medicine.id);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>remove_circle</i>\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</a> */}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</Table>\n\t\t</>\n\t);\n};\n\nexport default List;\n","import React, { FC } from 'react';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\nimport Form from './Form';\nimport List from './List';\n\ntype Props = {};\n\nconst Medicine: FC<Props> = (props) => {\n\tconst match = useRouteMatch();\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route path={url('')} exact component={List} />\n\t\t\t<Route path={url('/add')} component={Form} />\n\t\t\t<Route path={url('/:id/edit')} exact component={Form} />\n\t\t</Switch>\n\t);\n};\n\nexport default Medicine;\n","import React, { FC } from 'react';\n\ntype Props = {\n\ttitle: string;\n\tsubtitles?: string;\n\thead: () => JSX.Element;\n\tfoot?: () => JSX.Element;\n\tclassName?: string;\n};\n\nconst Table: FC<Props> = ({ title, subtitles, head, children, foot, className }) => {\n\treturn (\n\t\t<div className={`card ${className}`}>\n\t\t\t<div className='card-header card-header-success'>\n\t\t\t\t<h4 className='card-title'>{title}</h4>\n\t\t\t\t{subtitles ? <p className='card-category'>{subtitles}</p> : null}\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<div className='table-responsive'>\n\t\t\t\t\t<table className='table'>\n\t\t\t\t\t\t<thead className='text-success'>{head()}</thead>\n\t\t\t\t\t\t<tbody>{children}</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{foot ? <div className='card-footer'>{foot()}</div> : null}\n\t\t</div>\n\t);\n};\n\nexport default Table;\n","export class Symbol {\n\tprotected key: number;\n\n\tconstructor(description: number) {\n\t\tthis.key = description;\n\t}\n\n\tgetKey() {\n\t\treturn this.key;\n\t}\n}\n\nexport class EventBus {\n\tprotected callbacks: { [key: string]: Function[] } = {};\n\n\tdispatch(key: string, value?: any) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.callbacks[key].forEach((callback) => callback(value));\n\n\t\treturn this;\n\t}\n\n\tlisten<T>(key: string, callback: (args: T) => void) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\tthis.callbacks[key] = [];\n\t\t}\n\n\t\treturn new Symbol(this.callbacks[key].push(callback) - 1);\n\t}\n\n\tunlisten(key: string, symbol: Symbol) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.callbacks[key].splice(symbol.getKey(), 1);\n\t}\n}\n","import { EventBus } from './classes';\n\nexport const SearchBus = new EventBus();\n\nexport const MainBus = new EventBus();\n","import React from 'react';\nimport { Paginated } from '../Contracts/misc';\nimport { outIf, toBool } from '../helpers';\n\ntype Props = {\n\tpagination: Paginated<any>;\n\tonChange: (url: string) => void;\n\tsmall?: boolean;\n};\n\nexport default function Pagination({ pagination, onChange, small }: Props) {\n\tconst links = pagination.links.filter((link) => Number.isInteger(Number(link.label)));\n\n\tconst handleClick = (url: string | null) => {\n\t\treturn (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\te.preventDefault();\n\t\t\tif (url) {\n\t\t\t\tonChange(url);\n\t\t\t}\n\t\t};\n\t};\n\n\tif (pagination.total <= pagination.per_page) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<nav aria-label='Page Navigation'>\n\t\t\t<ul className={`pagination ${outIf(toBool(small), 'pagination-sm')}`}>\n\t\t\t\t<li className={`page-item ${outIf(pagination.prev_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.prev_page_url}`} onClick={handleClick(pagination.prev_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&lt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Previous</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t{links.map(({ active, label, url }, index) => (\n\t\t\t\t\t<li className={`page-item ${outIf(active, 'active')}`} key={index}>\n\t\t\t\t\t\t<a className='page-link' href={`${url}`} onClick={handleClick(url)}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t\t<li className={`page-item ${outIf(pagination.next_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.next_page_url}`} onClick={handleClick(pagination.next_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&gt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Next</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n"],"sourceRoot":""}