{"version":3,"sources":["assets/logo.svg","Components/Profile.tsx"],"names":["Profile","props","user","state","get","useState","picture","setPicture","url","Logo","displayPicture","setDisplayPicture","processing","setProcessing","useForm","defaultValues","register","handleSubmit","formRef","createRef","fileRef","reader","FileReader","onload","event","target","result","String","setShowSearch","useContext","SearchContext","setShow","submit","data","a","payload","FormData","Object","entries","forEach","key","value","append","axios","post","response","set","toastr","info","current","reset","handleError","useEffect","className","onSubmit","ref","type","disabled","name","role","accept","onChange","e","files","length","file","readAsDataURL","href","onClick","preventDefault","src","alt","click"],"mappings":"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","file":"static/js/25.240261fc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.73da28bd.svg\";","import axios from 'axios';\nimport React, { createRef, FC, useContext, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport toastr from 'toastr';\nimport { User } from '../Contracts/User';\nimport { handleError } from '../helpers';\nimport state from '../state';\nimport Logo from '../assets/logo.svg';\nimport { SearchContext } from '../contexts';\n\ntype Props = {};\n\nconst Profile: FC<Props> = (props) => {\n\tconst user = state.get<User>('user');\n\tconst [picture, setPicture] = useState<File | null>(null);\n\tconst [displayPicture, setDisplayPicture] = useState(user?.picture?.url || Logo);\n\tconst [processing, setProcessing] = useState(false);\n\tconst { register, handleSubmit } = useForm<User>({\n\t\tdefaultValues: {\n\t\t\t...user,\n\t\t},\n\t});\n\tconst formRef = createRef<HTMLFormElement>();\n\tconst fileRef = createRef<HTMLInputElement>();\n\tconst reader = new FileReader();\n\n\treader.onload = (event) => {\n\t\tif (event.target && event.target.result) {\n\t\t\tsetDisplayPicture(String(event.target.result));\n\t\t}\n\t};\n\n\tconst { setShow: setShowSearch } = useContext(SearchContext);\n\n\tconst submit = async (data: any) => {\n\t\tsetProcessing(true);\n\t\ttry {\n\t\t\tconst payload = new FormData();\n\t\t\tObject.entries(data).forEach(([key, value]) => payload.append(key, value as any));\n\t\t\tif (picture) {\n\t\t\t\tpayload.append('picture', picture);\n\t\t\t}\n\t\t\tconst response = await axios.post<User>('/auth/self', payload);\n\t\t\tstate.set('user', response.data);\n\t\t\ttoastr.info('Profile updated.', 'Notice');\n\t\t\tif (formRef.current) {\n\t\t\t\tformRef.current.reset();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t} finally {\n\t\t\tsetProcessing(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tsetShowSearch(false);\n\t\treturn () => {\n\t\t\tsetShowSearch(true);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<div className='container-fluid'>\n\t\t\t<form onSubmit={handleSubmit(submit)} ref={formRef}>\n\t\t\t\t<div className='row'>\n\t\t\t\t\t<div className='col-md-8'>\n\t\t\t\t\t\t<div className='card'>\n\t\t\t\t\t\t\t<div className='card-header card-header-success'>\n\t\t\t\t\t\t\t\t<h4 className='card-title'>Edit Profile</h4>\n\t\t\t\t\t\t\t\t<p className='card-category'>Complete your profile</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Name</label>\n\t\t\t\t\t\t\t\t\t\t\t<input ref={register} type='text' className='form-control' disabled={processing} name='name' />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Email</label>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Password</label>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Role</label>\n\t\t\t\t\t\t\t\t\t\t\t<input className='form-control disabled' disabled name='role' value={user.role} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type='submit' className='btn btn-info btn-sm pull-right'>\n\t\t\t\t\t\t\t\t\t{processing ? <i className='material-icons spin'>refresh</i> : 'Update Profile'}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div className='clearfix'></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='col-md-4'>\n\t\t\t\t\t\t<div className='card card-profile'>\n\t\t\t\t\t\t\t<div className='card-avatar'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={fileRef}\n\t\t\t\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\t\t\t\tclassName='d-none'\n\t\t\t\t\t\t\t\t\tname='picture'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\taccept='image/*'\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.target.files && e.target.files.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tconst file = e.target.files[0];\n\t\t\t\t\t\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\t\t\t\t\t\tsetPicture(file);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<a href='/' onClick={(e) => e.preventDefault()}>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tclassName='img'\n\t\t\t\t\t\t\t\t\t\tsrc={displayPicture}\n\t\t\t\t\t\t\t\t\t\talt='Profile'\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\tif (fileRef.current) {\n\t\t\t\t\t\t\t\t\t\t\t\tfileRef.current.click();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<h4 className='card-title'>{user.name}</h4>\n\t\t\t\t\t\t\t\t<h6 className='card-category text-gray'>{user.role}</h6>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default Profile;\n"],"sourceRoot":""}