(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[25],{263:function(e,a,c){"use strict";c.r(a);var t=c(2),s=c.n(t),r=c(6),l=c(20),i=c(7),n=c(3),d=c.n(n),o=c(1),j=c(88),b=c(16),m=c.n(b),u=c(11),f=c(14),O=c.p+"static/media/logo.73da28bd.svg",p=c(94),h=c(0);a.default=function(e){var a,c=f.a.get("user"),t=Object(o.useState)(null),n=Object(i.a)(t,2),b=n[0],x=n[1],v=Object(o.useState)((null===c||void 0===c||null===(a=c.picture)||void 0===a?void 0:a.url)||O),N=Object(i.a)(v,2),g=N[0],w=N[1],y=Object(o.useState)(!1),k=Object(i.a)(y,2),S=k[0],C=k[1],P=Object(j.b)({defaultValues:Object(l.a)({},c)}),R=P.register,q=P.handleSubmit,D=Object(o.createRef)(),E=Object(o.createRef)(),F=new FileReader;F.onload=function(e){e.target&&e.target.result&&w(String(e.target.result))};var J=Object(o.useContext)(p.a).setShow,U=function(){var e=Object(r.a)(s.a.mark((function e(a){var c,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,c=new FormData,Object.entries(a).forEach((function(e){var a=Object(i.a)(e,2),t=a[0],s=a[1];return c.append(t,s)})),b&&c.append("picture",b),e.next=7,d.a.post("/auth/self",c);case 7:t=e.sent,f.a.set("user",t.data),m.a.info("Profile updated.","Notice"),D.current&&D.current.reset(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Object(u.b)(e.t0);case 16:return e.prev=16,C(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(a){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return J(!1),function(){J(!0)}}),[]),Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("form",{onSubmit:q(U),ref:D,children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("div",{className:"card-header card-header-success",children:[Object(h.jsx)("h4",{className:"card-title",children:"Edit Profile"}),Object(h.jsx)("p",{className:"card-category",children:"Complete your profile"})]}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12 col-md-6",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Name"}),Object(h.jsx)("input",{ref:R,type:"text",className:"form-control",disabled:S,name:"name"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-6",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Email"}),Object(h.jsx)("input",{ref:R,type:"email",className:"form-control",disabled:S,name:"email"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-6",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Password"}),Object(h.jsx)("input",{ref:R,type:"password",className:"form-control",disabled:S,name:"password"})]})}),Object(h.jsx)("div",{className:"col-12 col-md-6",children:Object(h.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(h.jsx)("label",{className:"bmd-label-floating required",children:"Role"}),Object(h.jsx)("input",{className:"form-control disabled",disabled:!0,name:"role",value:c.role})]})})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-info btn-sm pull-right",children:S?Object(h.jsx)("i",{className:"material-icons spin",children:"refresh"}):"Update Profile"}),Object(h.jsx)("div",{className:"clearfix"})]})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsxs)("div",{className:"card card-profile",children:[Object(h.jsxs)("div",{className:"card-avatar",children:[Object(h.jsx)("input",{ref:E,type:"file",className:"d-none",name:"picture",disabled:S,accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var a=e.target.files[0];F.readAsDataURL(a),x(a)}}}),Object(h.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:Object(h.jsx)("img",{className:"img",src:g,alt:"Profile",onClick:function(e){e.preventDefault(),E.current&&E.current.click()}})})]}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h4",{className:"card-title",children:c.name}),Object(h.jsx)("h6",{className:"card-category text-gray",children:c.role})]})]})})]})})})}}}]);
//# sourceMappingURL=25.240261fc.chunk.js.map