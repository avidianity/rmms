(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[16],{262:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(4),r=c(2),s=c.n(r),i=c(6),l=c(7),o=c(3),d=c.n(o),u=c(88),b=c(16),j=c.n(b),h=c(11),m=c(0),p=function(e){var t=Object(a.useState)(!1),c=Object(l.a)(t,2),r=c[0],o=c[1],b=Object(a.useState)("Add"),p=Object(l.a)(b,2),f=p[0],O=p[1],x=Object(a.useState)(),v=Object(l.a)(x,2),N=v[0],g=v[1],k=Object(u.b)(),y=k.register,w=k.handleSubmit,_=k.setValue,C=Object(n.h)(),D=Object(n.f)(),S=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,"Add"===f?d.a.post("/users",t):d.a.put("/users/".concat(N),t);case 4:j.a.success("User saved successfully."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(h.b)(e.t0);case 10:return e.prev=10,o(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(s.a.mark((function e(t){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/users/".concat(t));case 3:c=e.sent,a=c.data,_("name",a.name),_("email",a.email),_("role",a.role),g(a.id),$(".form-group").addClass("is-filled"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),Object(h.b)(e.t0),D.goBack();case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){C.path.includes("edit")&&(O("Edit"),A(C.params.id))}),[]),Object(m.jsxs)("div",{className:"card",children:[Object(m.jsxs)("div",{className:"card-header card-header primary",children:[f," User",Object(m.jsx)("p",{className:"card-category",children:"Complete the form below."})]}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("form",{onSubmit:w(S),children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-12 col-md-6",children:Object(m.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(m.jsx)("label",{className:"bmd-label-floating required",children:"Name"}),Object(m.jsx)("input",{ref:y,type:"text",className:"form-control",disabled:r,name:"name"})]})}),Object(m.jsx)("div",{className:"col-12 col-md-6",children:Object(m.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(m.jsx)("label",{className:"bmd-label-floating required",children:"Email"}),Object(m.jsx)("input",{ref:y,type:"email",className:"form-control",disabled:r,name:"email"})]})}),Object(m.jsx)("div",{className:"col-12 col-md-6",children:Object(m.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(m.jsx)("label",{className:"bmd-label-floating required",children:"Password"}),Object(m.jsx)("input",{ref:y,type:"password",className:"form-control",disabled:r,name:"password"})]})}),Object(m.jsx)("div",{className:"col-12 col-md-6",children:Object(m.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(m.jsx)("label",{className:"bmd-label-floating required",children:"Role"}),Object(m.jsxs)("select",{ref:y,className:"form-control",disabled:r,name:"role",children:[Object(m.jsx)("option",{value:"Admin",children:"Admin"}),Object(m.jsx)("option",{value:"Doctor",children:"Doctor"}),Object(m.jsx)("option",{value:"Nurse",children:"Nurse"}),Object(m.jsx)("option",{value:"Pharmacist",children:"Pharmacist"})]})]})}),Object(m.jsx)("div",{className:"col-12",children:Object(m.jsx)("button",{type:"submit",className:"btn btn-info btn-sm",disabled:r,children:r?Object(m.jsx)("i",{className:"material-icons spin",children:"refresh"}):"Save"})})]})})})]})},f=c(21),O=c.n(f),x=c(32),v=c(243),N=c.n(v),g=c(86),k=c(14),y=c(87),w=c(85),_=function(e){var t=Object(a.useState)([]),c=Object(l.a)(t,2),r=c[0],o=c[1],u=Object(a.useState)(Object(h.c)()),b=Object(l.a)(u,2),p=b[0],f=b[1],v=Object(n.h)(),_=function(e){return"".concat(v.path).concat(e)},C=function(){var e=Object(i.a)(s.a.mark((function e(t){var c,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=k.a.get("user-page")||1,e.next=4,d.a.get(t||"/users?page=".concat(c));case 4:a=e.sent,n=a.data,o(n.data),f(n),k.a.set("user-page",n.current_page),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(h.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.delete("/users/".concat(t));case 3:j.a.info("User has been deleted.","Notice"),C(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(h.b)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(s.a.mark((function e(t){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/search?model=User&keyword=".concat(encodeURIComponent(t),"&paginate=false"));case 3:c=e.sent,a=c.data,o(a),f(Object(h.c)()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.toJSON()),j.a.error("Unable to search.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){C();var e=g.b.listen("submit",(function(e){e.length>0?S(e):C()}));return function(){g.b.unlisten("submit",e)}}),[]);var A=k.a.get("user");return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x.b,{to:_("/add"),className:"btn btn-info btn-sm",children:"Add New User"}),Object(m.jsx)(w.a,{title:"Users",head:function(){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"Email"}),Object(m.jsx)("th",{children:"Role"}),Object(m.jsx)("th",{children:"Created"}),Object(m.jsx)("th",{colSpan:2,className:"text-center",children:"Actions"})]})},foot:function(){return Object(m.jsx)(y.a,{pagination:p,onChange:function(e){return C(e)}})},children:r.map((function(e,t){var c=e.id,a=e.name,n=e.email,r=e.role,l=e.created_at;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:c}),Object(m.jsx)("td",{children:a}),Object(m.jsx)("td",{children:n}),Object(m.jsx)("td",{children:Object(m.jsx)("span",{className:"badge badge-".concat({Admin:"danger",Doctor:"primary",Nurse:"success",Midwife:"info",Pharmacist:"warning"}[r]),children:r})}),Object(m.jsx)("td",{children:O()(l).format("MMMM DD, YYYY hh:mm A")}),Object(m.jsxs)("td",{className:"text-center",children:[Object(m.jsxs)(x.b,{to:_("/".concat(c,"/edit")),className:"btn btn-warning btn-sm",title:"Edit",children:[Object(m.jsx)("i",{className:"material-icons mr-1",children:"create"}),"Edit"]}),A.id!==c?Object(m.jsxs)("a",{href:_("/".concat(c,"/delete")),className:"btn btn-danger btn-sm",title:"Delete",onClick:function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N()({title:"Delete ".concat(a,"?"),icon:"warning",buttons:["Cancel","Confirm"],dangerMode:!0});case 3:!0===e.sent&&D(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(m.jsx)("i",{className:"material-icons mr-1",children:"remove_circle"}),"Delete"]}):null]})]},t)}))})]})};t.default=function(e){var t=Object(n.h)(),c=function(e){return"".concat(t.path).concat(e)};return Object(m.jsxs)(n.c,{children:[Object(m.jsx)(n.a,{path:c(""),exact:!0,component:_}),Object(m.jsx)(n.a,{path:c("/add"),component:p}),Object(m.jsx)(n.a,{path:c("/:id/edit"),component:p})]})}},85:function(e,t,c){"use strict";c(1);var a=c(0);t.a=function(e){var t=e.title,c=e.subtitles,n=e.head,r=e.children,s=e.foot,i=e.className;return Object(a.jsxs)("div",{className:"card ".concat(i),children:[Object(a.jsxs)("div",{className:"card-header card-header-success",children:[Object(a.jsx)("h4",{className:"card-title",children:t}),c?Object(a.jsx)("p",{className:"card-category",children:c}):null]}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{className:"text-success",children:n()}),Object(a.jsx)("tbody",{children:r})]})})}),s?Object(a.jsx)("div",{className:"card-footer",children:s()}):null]})}},86:function(e,t,c){"use strict";c.d(t,"b",(function(){return i})),c.d(t,"a",(function(){return l}));var a=c(22),n=c(23),r=function(){function e(t){Object(a.a)(this,e),this.key=void 0,this.key=t}return Object(n.a)(e,[{key:"getKey",value:function(){return this.key}}]),e}(),s=function(){function e(){Object(a.a)(this,e),this.callbacks={}}return Object(n.a)(e,[{key:"dispatch",value:function(e,t){return e in this.callbacks?(this.callbacks[e].forEach((function(e){return e(t)})),this):this}},{key:"listen",value:function(e,t){return e in this.callbacks||(this.callbacks[e]=[]),new r(this.callbacks[e].push(t)-1)}},{key:"unlisten",value:function(e,t){e in this.callbacks&&this.callbacks[e].splice(t.getKey(),1)}}]),e}(),i=new s,l=new s},87:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));c(1);var a=c(11),n=c(0);function r(e){var t=e.pagination,c=e.onChange,r=e.small,s=t.links.filter((function(e){return Number.isInteger(Number(e.label))})),i=function(e){return function(t){t.preventDefault(),e&&c(e)}};return t.total<=t.per_page?null:Object(n.jsx)("nav",{"aria-label":"Page Navigation",children:Object(n.jsxs)("ul",{className:"pagination ".concat(Object(a.d)(Object(a.f)(r),"pagination-sm")),children:[Object(n.jsx)("li",{className:"page-item ".concat(Object(a.d)(null===t.prev_page_url,"disabled")),children:Object(n.jsxs)("a",{className:"page-link",href:"".concat(t.prev_page_url),onClick:i(t.prev_page_url),children:[Object(n.jsx)("span",{"aria-hidden":"true",children:"<"}),Object(n.jsx)("span",{className:"sr-only",children:"Previous"})]})}),s.map((function(e,t){var c=e.active,r=e.label,s=e.url;return Object(n.jsx)("li",{className:"page-item ".concat(Object(a.d)(c,"active")),children:Object(n.jsx)("a",{className:"page-link",href:"".concat(s),onClick:i(s),children:r})},t)})),Object(n.jsx)("li",{className:"page-item ".concat(Object(a.d)(null===t.next_page_url,"disabled")),children:Object(n.jsxs)("a",{className:"page-link",href:"".concat(t.next_page_url),onClick:i(t.next_page_url),children:[Object(n.jsx)("span",{"aria-hidden":"true",children:">"}),Object(n.jsx)("span",{className:"sr-only",children:"Next"})]})})]})})}}}]);
//# sourceMappingURL=16.bbdb3626.chunk.js.map