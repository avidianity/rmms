(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[14],{259:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(4),r=a(2),s=a.n(r),i=a(6),l=a(7),o=a(3),d=a.n(o),u=a(88),b=a(16),j=a.n(b),h=a(11),p=a(93),m=a.n(p),O=a(21),f=a.n(O),x=a(0),v=function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),r=a[0],o=a[1],b=Object(c.useState)("Add"),p=Object(l.a)(b,2),O=p[0],v=p[1],g=Object(c.useState)(),N=Object(l.a)(g,2),y=N[0],k=N[1],w=Object(c.useState)(new Date),S=Object(l.a)(w,2),_=S[0],C=S[1],q=Object(c.useState)([]),D=Object(l.a)(q,2),E=D[0],R=D[1],J=Object(u.b)(),A=J.register,I=J.handleSubmit,M=J.setValue,Y=Object(n.h)(),P=Object(n.f)(),U=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,t.date=_.toJSON(),e.next=5,"Add"===O?d.a.post("/inventory-releases",t):d.a.put("/inventory-releases/".concat(y),t);case 5:j.a.success("Supply Release saved successfully."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(h.b)(e.t0);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/inventory-releases/".concat(t));case 3:a=e.sent,c=a.data,M("name",c.name),M("inventory_id",c.inventory_id),M("quantity",c.quantity),C(f()(c.date).toDate()),k(c.id),$(".form-group").addClass("is-filled"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),Object(h.b)(e.t0),P.goBack();case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/inventories?paginate=false");case 3:t=e.sent,0===(a=t.data).length&&(j.a.error("No supplies exist. Cannot release."),P.goBack()),R(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.toJSON()),j.a.error("Unable to fetch supply list.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){F(),Y.path.includes("edit")&&(v("Edit"),B(Y.params.id))}),[]),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsxs)("div",{className:"card-header card-header primary",children:[O," Supply Release",Object(x.jsx)("p",{className:"card-category",children:"Complete the form below. Leave blank if not applicable."}),Object(x.jsxs)("p",{className:"card-category",children:["Fields with ",Object(x.jsx)("span",{style:{color:"rgb(190, 0, 0)"},children:"*"})," are required."]})]}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("form",{onSubmit:I(U),children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-12 col-md-6",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Name"}),Object(x.jsx)("input",{ref:A,type:"text",className:"form-control",disabled:r,name:"name"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-6",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Supply Name"}),Object(x.jsx)("select",{ref:A,className:"form-control",disabled:r,name:"inventory_id",children:E.map((function(e,t){return Object(x.jsx)("option",{value:e.id,children:e.description},t)}))})]})}),Object(x.jsx)("div",{className:"col-12 col-md-6",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Quantity"}),Object(x.jsx)("input",{ref:A,type:"number",className:"form-control",disabled:r,name:"quantity"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-6",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(x.jsx)("label",{className:"bmd-label-floating",children:"Date"}),Object(x.jsx)(m.a,{value:_,className:"form-control",onChange:function(e){return C(e[0])}})]})}),Object(x.jsx)("div",{className:"col-12",children:Object(x.jsx)("button",{type:"submit",className:"btn btn-info btn-sm",disabled:r,children:r?Object(x.jsx)("i",{className:"material-icons spin",children:"refresh"}):"Save"})})]})})})]})},g=a(32),N=a(86),y=a(14),k=a(87),w=a(85),S=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),r=a[0],o=a[1],u=Object(c.useState)(Object(h.c)()),b=Object(l.a)(u,2),p=b[0],m=b[1],O=Object(n.h)(),v=function(e){return"".concat(O.path).concat(e)},S=y.a.get("user"),_=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,c,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=y.a.get("inventory-releases-page")||1,e.next=4,d.a.get(t||"/inventory-releases?page=".concat(a));case 4:c=e.sent,n=c.data,o(n.data),m(n),y.a.set("inventory-releases-page",n.current_page),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(h.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/search?model=InventoryRelease&keyword=".concat(encodeURIComponent(t),"&paginate=false"));case 3:a=e.sent,c=a.data,o(c),m(Object(h.c)()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.toJSON()),j.a.error("Unable to search.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){_();var e=N.b.listen("submit",(function(e){e.length>0?C(e):_()}));return function(){N.b.unlisten("submit",e)}}),[]),Object(x.jsxs)(x.Fragment,{children:[["Pharmacist"].includes(S.role)?Object(x.jsx)(g.b,{to:v("/add"),className:"btn btn-info btn-sm",children:"Add New Supply Release"}):null,Object(x.jsx)(w.a,{title:"Supply Release",head:function(){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"ID"}),Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Date"}),Object(x.jsx)("th",{children:"Supply Name"}),Object(x.jsx)("th",{className:"text-center",children:"Actions"})]})},foot:function(){return Object(x.jsx)(k.a,{pagination:p,onChange:function(e){return _(e)}})},children:r.map((function(e,t){var a;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.id}),Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:e.quantity}),Object(x.jsx)("td",{children:f()(e.date).format("MMMM DD, YYYY")}),Object(x.jsx)("td",{children:null===(a=e.inventory)||void 0===a?void 0:a.description}),Object(x.jsx)("td",{className:"text-center",children:Object(x.jsxs)(g.b,{to:v("/".concat(e.id,"/edit")),className:"btn btn-warning btn-sm",title:"Edit",children:[Object(x.jsx)("i",{className:"material-icons mr-1",children:"create"}),"Edit"]})})]},t)}))})]})};t.default=function(e){var t=Object(n.h)(),a=function(e){return"".concat(t.path).concat(e)};return Object(x.jsxs)(n.c,{children:[Object(x.jsx)(n.a,{path:a(""),exact:!0,component:S}),Object(x.jsx)(n.a,{path:a("/add"),component:v}),Object(x.jsx)(n.a,{path:a("/:id/edit"),component:v})]})}},85:function(e,t,a){"use strict";a(1);var c=a(0);t.a=function(e){var t=e.title,a=e.subtitles,n=e.head,r=e.children,s=e.foot,i=e.className;return Object(c.jsxs)("div",{className:"card ".concat(i),children:[Object(c.jsxs)("div",{className:"card-header card-header-success",children:[Object(c.jsx)("h4",{className:"card-title",children:t}),a?Object(c.jsx)("p",{className:"card-category",children:a}):null]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{className:"text-success",children:n()}),Object(c.jsx)("tbody",{children:r})]})})}),s?Object(c.jsx)("div",{className:"card-footer",children:s()}):null]})}},86:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var c=a(22),n=a(23),r=function(){function e(t){Object(c.a)(this,e),this.key=void 0,this.key=t}return Object(n.a)(e,[{key:"getKey",value:function(){return this.key}}]),e}(),s=function(){function e(){Object(c.a)(this,e),this.callbacks={}}return Object(n.a)(e,[{key:"dispatch",value:function(e,t){return e in this.callbacks?(this.callbacks[e].forEach((function(e){return e(t)})),this):this}},{key:"listen",value:function(e,t){return e in this.callbacks||(this.callbacks[e]=[]),new r(this.callbacks[e].push(t)-1)}},{key:"unlisten",value:function(e,t){e in this.callbacks&&this.callbacks[e].splice(t.getKey(),1)}}]),e}(),i=new s,l=new s},87:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(1);var c=a(11),n=a(0);function r(e){var t=e.pagination,a=e.onChange,r=e.small,s=t.links.filter((function(e){return Number.isInteger(Number(e.label))})),i=function(e){return function(t){t.preventDefault(),e&&a(e)}};return t.total<=t.per_page?null:Object(n.jsx)("nav",{"aria-label":"Page Navigation",children:Object(n.jsxs)("ul",{className:"pagination ".concat(Object(c.d)(Object(c.f)(r),"pagination-sm")),children:[Object(n.jsx)("li",{className:"page-item ".concat(Object(c.d)(null===t.prev_page_url,"disabled")),children:Object(n.jsxs)("a",{className:"page-link",href:"".concat(t.prev_page_url),onClick:i(t.prev_page_url),children:[Object(n.jsx)("span",{"aria-hidden":"true",children:"<"}),Object(n.jsx)("span",{className:"sr-only",children:"Previous"})]})}),s.map((function(e,t){var a=e.active,r=e.label,s=e.url;return Object(n.jsx)("li",{className:"page-item ".concat(Object(c.d)(a,"active")),children:Object(n.jsx)("a",{className:"page-link",href:"".concat(s),onClick:i(s),children:r})},t)})),Object(n.jsx)("li",{className:"page-item ".concat(Object(c.d)(null===t.next_page_url,"disabled")),children:Object(n.jsxs)("a",{className:"page-link",href:"".concat(t.next_page_url),onClick:i(t.next_page_url),children:[Object(n.jsx)("span",{"aria-hidden":"true",children:">"}),Object(n.jsx)("span",{className:"sr-only",children:"Next"})]})})]})})}}}]);
//# sourceMappingURL=14.c9bffb4e.chunk.js.map