{"version":3,"sources":["Components/Inventories/Form.tsx","Components/Inventories/List.tsx","Components/Inventories/index.tsx","Components/Table.tsx","classes.ts","events.ts","Components/Pagination.tsx"],"names":["Form","props","useState","processing","setProcessing","mode","setMode","id","setID","dateDelivered","setDateDelivered","Date","expiryDate","setExpiryDate","useForm","register","handleSubmit","setValue","match","useRouteMatch","history","useHistory","submit","data","a","date_delivered","toJSON","expiry_date","axios","post","put","toastr","success","handleError","fetchInventory","get","description","unit_of_issue","estimated_unit_cost","quantity","dayjs","toDate","critical_value","$","addClass","goBack","useEffect","path","includes","params","className","style","color","onSubmit","ref","type","disabled","name","value","undefined","onChange","dates","List","inventories","setInventories","makeDummyPagination","pagination","setPagination","user","state","url","fetchInventories","page","set","current_page","search","keyword","encodeURIComponent","console","log","error","key","SearchBus","listen","length","unlisten","role","to","Table","title","head","foot","Pagination","map","inventory","index","number_of_units","formatCurrency","format","released","available","estimated_cost","Inventories","exact","component","subtitles","children","Symbol","this","EventBus","callbacks","forEach","callback","push","symbol","splice","getKey","MainBus","small","links","filter","link","Number","isInteger","label","handleClick","e","preventDefault","total","per_page","aria-label","outIf","toBool","prev_page_url","href","onClick","aria-hidden","active","next_page_url"],"mappings":"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","file":"static/js/13.849c5452.chunk.js","sourcesContent":["import axios from 'axios';\nimport dayjs from 'dayjs';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport toastr from 'toastr';\nimport { Inventory } from '../../Contracts/Inventory';\nimport { handleError } from '../../helpers';\nimport Flatpickr from 'react-flatpickr';\n\ntype Props = {};\n\nconst Form: FC<Props> = (props) => {\n\tconst [processing, setProcessing] = useState(false);\n\tconst [mode, setMode] = useState('Add');\n\tconst [id, setID] = useState<number>();\n\tconst [dateDelivered, setDateDelivered] = useState<Date | null>(null);\n\tconst [expiryDate, setExpiryDate] = useState(new Date());\n\tconst { register, handleSubmit, setValue } = useForm<Inventory>();\n\tconst match = useRouteMatch<{ id: string }>();\n\tconst history = useHistory();\n\n\tconst submit = async (data: Inventory) => {\n\t\tsetProcessing(true);\n\t\ttry {\n\t\t\tdata.date_delivered = dateDelivered?.toJSON() || null;\n\t\t\tdata.expiry_date = expiryDate.toJSON();\n\t\t\tawait (mode === 'Add' ? axios.post(`/inventories`, data) : axios.put(`/inventories/${id}`, data));\n\t\t\ttoastr.success('Medical Equipment saved successfully.');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t} finally {\n\t\t\tsetProcessing(false);\n\t\t}\n\t};\n\n\tconst fetchInventory = async (id: any) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get<Inventory>(`/inventories/${id}`);\n\t\t\tsetValue('description', data.description);\n\t\t\tsetValue('unit_of_issue', data.unit_of_issue);\n\t\t\tsetValue('estimated_unit_cost', data.estimated_unit_cost);\n\t\t\tsetValue('quantity', data.quantity);\n\t\t\tsetDateDelivered(data.date_delivered ? dayjs(data.date_delivered).toDate() : null);\n\t\t\tsetExpiryDate(dayjs(data.expiry_date).toDate());\n\t\t\tsetValue('critical_value', data.critical_value);\n\t\t\tsetID(data.id);\n\t\t\t$('.form-group').addClass('is-filled');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t\thistory.goBack();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (match.path.includes('edit')) {\n\t\t\tsetMode('Edit');\n\t\t\tfetchInventory(match.params.id);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<div className='card'>\n\t\t\t<div className='card-header card-header primary'>\n\t\t\t\t{mode} Medical Equipment\n\t\t\t\t<p className='card-category'>Complete the form below. Leave blank if not applicable.</p>\n\t\t\t\t<p className='card-category'>\n\t\t\t\t\tFields with <span style={{ color: 'rgb(190, 0, 0)' }}>*</span> are required.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<form onSubmit={handleSubmit(submit)}>\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Description</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='text' className='form-control' disabled={processing} name='description' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Number of Units</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='number' className='form-control' disabled={processing} name='number_of_units' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Unit of Issue</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='text' className='form-control' disabled={processing} name='unit_of_issue' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Estimated Unit Cost</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='estimated_unit_cost'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Quantity</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='number' className='form-control' disabled={processing} name='quantity' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating'>Date Delivered</label>\n\t\t\t\t\t\t\t\t<Flatpickr\n\t\t\t\t\t\t\t\t\tvalue={dateDelivered || undefined}\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tonChange={(dates) => setDateDelivered(dates[0])}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Expiry Date</label>\n\t\t\t\t\t\t\t\t<Flatpickr value={expiryDate} className='form-control' onChange={(dates) => setExpiryDate(dates[0])} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-6'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Critical Value</label>\n\t\t\t\t\t\t\t\t<input ref={register} type='number' className='form-control' disabled={processing} name='critical_value' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12'>\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-info btn-sm' disabled={processing}>\n\t\t\t\t\t\t\t\t{processing ? <i className='material-icons spin'>refresh</i> : 'Save'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Form;\n","import axios from 'axios';\nimport dayjs from 'dayjs';\nimport React, { FC, useEffect, useState } from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { Paginated } from '../../Contracts/misc';\nimport { Inventory } from '../../Contracts/Inventory';\nimport { User } from '../../Contracts/User';\nimport { makeDummyPagination, handleError, formatCurrency } from '../../helpers';\nimport state from '../../state';\nimport Pagination from '../Pagination';\nimport Table from '../Table';\nimport toastr from 'toastr';\nimport { SearchBus } from '../../events';\n\ntype Props = {};\n\nconst List: FC<Props> = (props) => {\n\tconst [inventories, setInventories] = useState<Inventory[]>([]);\n\tconst [pagination, setPagination] = useState<Paginated>(makeDummyPagination());\n\tconst match = useRouteMatch();\n\n\tconst user = state.get<User>('user');\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\tconst fetchInventories = async (url?: string) => {\n\t\ttry {\n\t\t\tconst page = state.get<number>('inventory-page') || 1;\n\t\t\tconst { data } = await axios.get<Paginated<Inventory>>(url ? url : `/inventories?page=${page}`);\n\t\t\tsetInventories(data.data);\n\t\t\tsetPagination(data);\n\t\t\tstate.set('inventory-page', data.current_page);\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t}\n\t};\n\n\t// const deleteInventory = async (id: any) => {\n\t// \ttry {\n\t// \t\tawait axios.delete(`/inventories/${id}`);\n\t// \t\ttoastr.info('Inventory has been deleted.', 'Notice');\n\t// \t\tfetchInventories();\n\t// \t} catch (error) {\n\t// \t\thandleError(error);\n\t// \t}\n\t// };\n\n\tconst search = async (keyword: string) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/search?model=Inventory&keyword=${encodeURIComponent(keyword)}&paginate=false`);\n\t\t\tsetInventories(data);\n\t\t\tsetPagination(makeDummyPagination());\n\t\t} catch (error) {\n\t\t\tconsole.log(error.toJSON());\n\t\t\ttoastr.error('Unable to search.');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchInventories();\n\t\tconst key = SearchBus.listen<string>('submit', (keyword) => {\n\t\t\tif (keyword.length > 0) {\n\t\t\t\tsearch(keyword);\n\t\t\t} else {\n\t\t\t\tfetchInventories();\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tSearchBus.unlisten('submit', key);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{['Pharmacist'].includes(user.role) ? (\n\t\t\t\t<Link to={url('/add')} className='btn btn-info btn-sm'>\n\t\t\t\t\tAdd New Medical Equipment\n\t\t\t\t</Link>\n\t\t\t) : null}\n\t\t\t<Table\n\t\t\t\ttitle='Medical Equipment'\n\t\t\t\thead={() => (\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t<th>Description</th>\n\t\t\t\t\t\t<th>Number of Units</th>\n\t\t\t\t\t\t<th>Unit of Issue</th>\n\t\t\t\t\t\t<th>Estimated Unit Cost</th>\n\t\t\t\t\t\t<th>Quantity</th>\n\t\t\t\t\t\t<th>Date Delivered</th>\n\t\t\t\t\t\t<th>Expiry Date</th>\n\t\t\t\t\t\t<th>Critical Value</th>\n\t\t\t\t\t\t<th>Released</th>\n\t\t\t\t\t\t<th>Available</th>\n\t\t\t\t\t\t<th>Estimated Cost</th>\n\t\t\t\t\t\t<th>Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t)}\n\t\t\t\tfoot={() => <Pagination pagination={pagination} onChange={(url) => fetchInventories(url)} />}>\n\t\t\t\t{inventories.map((inventory, index) => (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td>{inventory.id}</td>\n\t\t\t\t\t\t<td>{inventory.description}</td>\n\t\t\t\t\t\t<td>{inventory.number_of_units}</td>\n\t\t\t\t\t\t<td>{inventory.unit_of_issue}</td>\n\t\t\t\t\t\t<td>{formatCurrency(inventory.estimated_unit_cost)}</td>\n\t\t\t\t\t\t<td>{inventory.quantity}</td>\n\t\t\t\t\t\t<td>{inventory.date_delivered ? dayjs(inventory.date_delivered).format('MMMM DD, YYYY') : 'N/A'}</td>\n\t\t\t\t\t\t<td>{dayjs(inventory.expiry_date).format('MMMM DD, YYYY')}</td>\n\t\t\t\t\t\t<td>{inventory.critical_value}</td>\n\t\t\t\t\t\t<td>{inventory.released}</td>\n\t\t\t\t\t\t<td>{inventory.available}</td>\n\t\t\t\t\t\t<td>{formatCurrency(inventory.estimated_cost)}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<Link to={url(`/${inventory.id}/edit`)} className='btn btn-warning btn-sm' title='Edit'>\n\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>create</i>\n\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{/* <a\n\t\t\t\t\t\t\t\thref={url(`/${id}/delete`)}\n\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm'\n\t\t\t\t\t\t\t\ttitle='Delete'\n\t\t\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tconst confirm = await swal({\n\t\t\t\t\t\t\t\t\t\ttitle: `Delete ${name}?`,\n\t\t\t\t\t\t\t\t\t\ticon: 'warning',\n\t\t\t\t\t\t\t\t\t\tbuttons: ['Cancel', 'Confirm'],\n\t\t\t\t\t\t\t\t\t\tdangerMode: true,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (confirm === true) {\n\t\t\t\t\t\t\t\t\t\tdeleteinventory(id);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>remove_circle</i>\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</a> */}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</Table>\n\t\t</>\n\t);\n};\n\nexport default List;\n","import React, { FC } from 'react';\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\nimport Form from './Form';\nimport List from './List';\n\ntype Props = {};\n\nconst Inventories: FC<Props> = (props) => {\n\tconst match = useRouteMatch();\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route path={url('')} exact component={List} />\n\t\t\t<Route path={url('/add')} component={Form} />\n\t\t\t{/* <Route path={url('/:id')} exact component={View} /> */}\n\t\t\t<Route path={url('/:id/edit')} component={Form} />\n\t\t</Switch>\n\t);\n};\n\nexport default Inventories;\n","import React, { FC } from 'react';\n\ntype Props = {\n\ttitle: string;\n\tsubtitles?: string;\n\thead: () => JSX.Element;\n\tfoot?: () => JSX.Element;\n\tclassName?: string;\n};\n\nconst Table: FC<Props> = ({ title, subtitles, head, children, foot, className }) => {\n\treturn (\n\t\t<div className={`card ${className}`}>\n\t\t\t<div className='card-header card-header-success'>\n\t\t\t\t<h4 className='card-title'>{title}</h4>\n\t\t\t\t{subtitles ? <p className='card-category'>{subtitles}</p> : null}\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<div className='table-responsive'>\n\t\t\t\t\t<table className='table'>\n\t\t\t\t\t\t<thead className='text-success'>{head()}</thead>\n\t\t\t\t\t\t<tbody>{children}</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{foot ? <div className='card-footer'>{foot()}</div> : null}\n\t\t</div>\n\t);\n};\n\nexport default Table;\n","export class Symbol {\n\tprotected key: number;\n\n\tconstructor(description: number) {\n\t\tthis.key = description;\n\t}\n\n\tgetKey() {\n\t\treturn this.key;\n\t}\n}\n\nexport class EventBus {\n\tprotected callbacks: { [key: string]: Function[] } = {};\n\n\tdispatch(key: string, value?: any) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.callbacks[key].forEach((callback) => callback(value));\n\n\t\treturn this;\n\t}\n\n\tlisten<T>(key: string, callback: (args: T) => void) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\tthis.callbacks[key] = [];\n\t\t}\n\n\t\treturn new Symbol(this.callbacks[key].push(callback) - 1);\n\t}\n\n\tunlisten(key: string, symbol: Symbol) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.callbacks[key].splice(symbol.getKey(), 1);\n\t}\n}\n","import { EventBus } from './classes';\n\nexport const SearchBus = new EventBus();\n\nexport const MainBus = new EventBus();\n","import React from 'react';\nimport { Paginated } from '../Contracts/misc';\nimport { outIf, toBool } from '../helpers';\n\ntype Props = {\n\tpagination: Paginated<any>;\n\tonChange: (url: string) => void;\n\tsmall?: boolean;\n};\n\nexport default function Pagination({ pagination, onChange, small }: Props) {\n\tconst links = pagination.links.filter((link) => Number.isInteger(Number(link.label)));\n\n\tconst handleClick = (url: string | null) => {\n\t\treturn (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\te.preventDefault();\n\t\t\tif (url) {\n\t\t\t\tonChange(url);\n\t\t\t}\n\t\t};\n\t};\n\n\tif (pagination.total <= pagination.per_page) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<nav aria-label='Page Navigation'>\n\t\t\t<ul className={`pagination ${outIf(toBool(small), 'pagination-sm')}`}>\n\t\t\t\t<li className={`page-item ${outIf(pagination.prev_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.prev_page_url}`} onClick={handleClick(pagination.prev_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&lt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Previous</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t{links.map(({ active, label, url }, index) => (\n\t\t\t\t\t<li className={`page-item ${outIf(active, 'active')}`} key={index}>\n\t\t\t\t\t\t<a className='page-link' href={`${url}`} onClick={handleClick(url)}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t\t<li className={`page-item ${outIf(pagination.next_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.next_page_url}`} onClick={handleClick(pagination.next_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&gt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Next</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n"],"sourceRoot":""}