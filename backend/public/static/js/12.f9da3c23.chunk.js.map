{"version":3,"sources":["Components/IllnessHistories/Form.tsx","Components/IllnessHistories/List.tsx","Components/IllnessHistories/index.tsx","Components/Table.tsx","classes.ts","events.ts","Components/Pagination.tsx"],"names":["Form","props","useState","processing","setProcessing","mode","setMode","id","setID","patients","setPatients","patientID","setPatientID","patientName","setPatientName","useForm","register","handleSubmit","setValue","match","useRouteMatch","history","useHistory","submit","data","a","patient_id","axios","post","put","toastr","success","handleError","fetchMedicine","get","patient","name","chief_complaint","physical_exams","bp","wt","ht","spo2","pr","tt","$","addClass","goBack","fetchPatients","fetchRequirements","Promise","all","console","log","toJSON","error","useEffect","path","includes","params","className","style","color","onSubmit","outIf","disabled","onChange","e","target","value","find","list","map","index","ref","type","List","histories","setIllnessHistories","makeDummyPagination","pagination","setPagination","user","state","url","fetchIllnessHistories","page","set","current_page","search","keyword","encodeURIComponent","key","SearchBus","listen","length","unlisten","role","to","Table","title","head","colSpan","foot","Pagination","created_at","dayjs","format","IllnessHistories","exact","component","subtitles","children","Symbol","description","this","EventBus","callbacks","forEach","callback","push","symbol","splice","getKey","MainBus","small","links","filter","link","Number","isInteger","label","handleClick","preventDefault","total","per_page","aria-label","toBool","prev_page_url","href","onClick","aria-hidden","active","next_page_url"],"mappings":"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","file":"static/js/12.f9da3c23.chunk.js","sourcesContent":["import axios from 'axios';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport toastr from 'toastr';\nimport { IllnessHistory } from '../../Contracts/IllnessHistory';\nimport { handleError, outIf } from '../../helpers';\nimport { Patient } from '../../Contracts/Patient';\n\ntype Props = {};\n\nconst Form: FC<Props> = (props) => {\n\tconst [processing, setProcessing] = useState(false);\n\tconst [mode, setMode] = useState('Add');\n\tconst [id, setID] = useState<number>();\n\tconst [patients, setPatients] = useState<Patient[]>([]);\n\tconst [patientID, setPatientID] = useState(-1);\n\tconst [patientName, setPatientName] = useState('');\n\tconst { register, handleSubmit, setValue } = useForm<IllnessHistory>();\n\tconst match = useRouteMatch<{ id: string }>();\n\tconst history = useHistory();\n\n\tconst submit = async (data: IllnessHistory) => {\n\t\tsetProcessing(true);\n\t\ttry {\n\t\t\tdata.patient_id = patientID;\n\t\t\tawait (mode === 'Add' ? axios.post(`/illness-histories`, data) : axios.put(`/illness-histories/${id}`, data));\n\t\t\ttoastr.success('Illness History saved successfully.');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t} finally {\n\t\t\tsetProcessing(false);\n\t\t}\n\t};\n\n\tconst fetchMedicine = async (id: any) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get<IllnessHistory>(`/illness-histories/${id}`);\n\t\t\tsetPatientID(data.patient_id);\n\t\t\tsetPatientName(data.patient?.name || '');\n\t\t\tsetValue('chief_complaint', data.chief_complaint);\n\t\t\tsetValue('physical_exams[bp]', data.physical_exams.bp);\n\t\t\tsetValue('physical_exams[wt]', data.physical_exams.wt);\n\t\t\tsetValue('physical_exams[ht]', data.physical_exams.ht);\n\t\t\tsetValue('physical_exams[spo2]', data.physical_exams.spo2);\n\t\t\tsetValue('physical_exams[pr]', data.physical_exams.pr);\n\t\t\tsetValue('physical_exams[tt]', data.physical_exams.tt);\n\t\t\tsetID(data.id);\n\t\t\t$('.form-group').addClass('is-filled');\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t\thistory.goBack();\n\t\t}\n\t};\n\n\tconst fetchPatients = async () => {\n\t\tconst { data } = await axios.get('/patients?paginate=false');\n\t\tsetPatients(data);\n\t};\n\n\tconst fetchRequirements = async () => {\n\t\ttry {\n\t\t\tawait Promise.all([fetchPatients()]);\n\t\t} catch (error) {\n\t\t\tconsole.log(error.toJSON());\n\t\t\ttoastr.error('Unable to fetch patient list.');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchRequirements();\n\t\tif (match.path.includes('edit')) {\n\t\t\tsetMode('Edit');\n\t\t\tfetchMedicine(match.params.id);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<div className='card'>\n\t\t\t<div className='card-header card-header primary'>\n\t\t\t\t{mode} Illness History\n\t\t\t\t<p className='card-category'>Complete the form below. Leave blank if not applicable.</p>\n\t\t\t\t<p className='card-category'>\n\t\t\t\t\tFields with <span style={{ color: 'rgb(190, 0, 0)' }}>*</span> are required.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<form onSubmit={handleSubmit(submit)}>\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className='col-12'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group is-filled'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Patient</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName={`form-control ${outIf(mode === 'Edit', 'disabled')}`}\n\t\t\t\t\t\t\t\t\tdisabled={processing || mode === 'Edit'}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst name = e.target.value;\n\t\t\t\t\t\t\t\t\t\tconst patient = patients.find((patient) => patient.name === name);\n\t\t\t\t\t\t\t\t\t\tif (patient) {\n\t\t\t\t\t\t\t\t\t\t\tsetPatientID(patient.id!);\n\t\t\t\t\t\t\t\t\t\t\tsetPatientName(patient.name);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetPatientName(name);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={patientName}\n\t\t\t\t\t\t\t\t\tlist='patientList'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<datalist id='patientList'>\n\t\t\t\t\t\t\t\t\t{patients.map((patient, index) => (\n\t\t\t\t\t\t\t\t\t\t<option key={index} value={patient.name}>\n\t\t\t\t\t\t\t\t\t\t\t{patient.name}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</datalist>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Chief Complaint</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName={`form-control ${outIf(mode === 'Edit', 'disabled')}`}\n\t\t\t\t\t\t\t\t\tdisabled={processing || mode === 'Edit'}\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\tname='chief_complaint'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12'>\n\t\t\t\t\t\t\t<hr className='my-3' />\n\t\t\t\t\t\t\t<h3>Physical Exams</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Blood Pressure</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='physical_exams[bp]'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Weight</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='physical_exams[wt]'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>Height</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='physical_exams[ht]'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>SPO2</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='physical_exams[spo2]'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>PR</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='physical_exams[pr]'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12 col-md-4'>\n\t\t\t\t\t\t\t<div className='form-group bmd-form-group'>\n\t\t\t\t\t\t\t\t<label className='bmd-label-floating required'>TT</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tdisabled={processing}\n\t\t\t\t\t\t\t\t\tname='physical_exams[tt]'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-12'>\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-info btn-sm' disabled={processing}>\n\t\t\t\t\t\t\t\t{processing ? <i className='material-icons spin'>refresh</i> : 'Save'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Form;\n","import axios from 'axios';\nimport dayjs from 'dayjs';\nimport React, { FC, useEffect, useState } from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { Paginated } from '../../Contracts/misc';\nimport { IllnessHistory } from '../../Contracts/IllnessHistory';\nimport { User } from '../../Contracts/User';\nimport { makeDummyPagination, handleError } from '../../helpers';\nimport state from '../../state';\nimport Pagination from '../Pagination';\nimport Table from '../Table';\nimport toastr from 'toastr';\nimport { SearchBus } from '../../events';\n\ntype Props = {};\n\nconst List: FC<Props> = (props) => {\n\tconst [histories, setIllnessHistories] = useState<IllnessHistory[]>([]);\n\tconst [pagination, setPagination] = useState<Paginated>(makeDummyPagination());\n\tconst match = useRouteMatch();\n\n\tconst user = state.get<User>('user');\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\tconst fetchIllnessHistories = async (url?: string) => {\n\t\ttry {\n\t\t\tconst page = state.get<number>('inventory-page') || 1;\n\t\t\tconst { data } = await axios.get<Paginated<IllnessHistory>>(url ? url : `/illness-histories?page=${page}`);\n\t\t\tsetIllnessHistories(data.data);\n\t\t\tsetPagination(data);\n\t\t\tstate.set('inventory-page', data.current_page);\n\t\t} catch (error) {\n\t\t\thandleError(error);\n\t\t}\n\t};\n\n\t// const deleteIllnessHistory = async (id: any) => {\n\t// \ttry {\n\t// \t\tawait axios.delete(`/illness-histories/${id}`);\n\t// \t\ttoastr.info('Illness History has been deleted.', 'Notice');\n\t// \t\tfetchIllnessHistories();\n\t// \t} catch (error) {\n\t// \t\thandleError(error);\n\t// \t}\n\t// };\n\n\tconst search = async (keyword: string) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/search?model=IllnessHistory&keyword=${encodeURIComponent(keyword)}&paginate=false`);\n\t\t\tsetIllnessHistories(data);\n\t\t\tsetPagination(makeDummyPagination());\n\t\t} catch (error) {\n\t\t\tconsole.log(error.toJSON());\n\t\t\ttoastr.error('Unable to search.');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchIllnessHistories();\n\t\tconst key = SearchBus.listen<string>('submit', (keyword) => {\n\t\t\tif (keyword.length > 0) {\n\t\t\t\tsearch(keyword);\n\t\t\t} else {\n\t\t\t\tfetchIllnessHistories();\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tSearchBus.unlisten('submit', key);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{['Admin', 'Nurse', 'Midwife'].includes(user.role) ? (\n\t\t\t\t<Link to={url('/add')} className='btn btn-info btn-sm'>\n\t\t\t\t\tAdd New Illness History\n\t\t\t\t</Link>\n\t\t\t) : null}\n\t\t\t<Table\n\t\t\t\ttitle='Illness Histories'\n\t\t\t\thead={() => (\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t<th>Patient</th>\n\t\t\t\t\t\t<th>Issued</th>\n\t\t\t\t\t\t<th colSpan={3}>Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t)}\n\t\t\t\tfoot={() => <Pagination pagination={pagination} onChange={(url) => fetchIllnessHistories(url)} />}>\n\t\t\t\t{histories.map(({ id, patient, created_at }, index) => (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td>{id}</td>\n\t\t\t\t\t\t<td>{patient?.name}</td>\n\t\t\t\t\t\t<td>{dayjs(created_at).format('MMMM DD, YYYY hh:mm A')}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<Link to={url(`/${id}`)} className='btn btn-info btn-sm' title='View'>\n\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>visibility</i>\n\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{['Nurse', 'Midwife', 'Admin'].includes(user.role) ? (\n\t\t\t\t\t\t\t\t<Link to={url(`/${id}/edit`)} className='btn btn-warning btn-sm' title='Edit'>\n\t\t\t\t\t\t\t\t\t<i className='material-icons mr-1'>create</i>\n\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</Table>\n\t\t</>\n\t);\n};\n\nexport default List;\n","import React, { FC } from 'react';\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\nimport Form from './Form';\nimport List from './List';\n\ntype Props = {};\n\nconst IllnessHistories: FC<Props> = (props) => {\n\tconst match = useRouteMatch();\n\n\tconst url = (path: string) => `${match.path}${path}`;\n\n\treturn (\n\t\t<Switch>\n\t\t\t<Route path={url('')} exact component={List} />\n\t\t\t<Route path={url('/add')} component={Form} />\n\t\t\t{/* <Route path={url('/:id')} exact component={View} /> */}\n\t\t\t<Route path={url('/:id/edit')} component={Form} />\n\t\t</Switch>\n\t);\n};\n\nexport default IllnessHistories;\n","import React, { FC } from 'react';\n\ntype Props = {\n\ttitle: string;\n\tsubtitles?: string;\n\thead: () => JSX.Element;\n\tfoot?: () => JSX.Element;\n\tclassName?: string;\n};\n\nconst Table: FC<Props> = ({ title, subtitles, head, children, foot, className }) => {\n\treturn (\n\t\t<div className={`card ${className}`}>\n\t\t\t<div className='card-header card-header-success'>\n\t\t\t\t<h4 className='card-title'>{title}</h4>\n\t\t\t\t{subtitles ? <p className='card-category'>{subtitles}</p> : null}\n\t\t\t</div>\n\t\t\t<div className='card-body'>\n\t\t\t\t<div className='table-responsive'>\n\t\t\t\t\t<table className='table'>\n\t\t\t\t\t\t<thead className='text-success'>{head()}</thead>\n\t\t\t\t\t\t<tbody>{children}</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{foot ? <div className='card-footer'>{foot()}</div> : null}\n\t\t</div>\n\t);\n};\n\nexport default Table;\n","export class Symbol {\n\tprotected key: number;\n\n\tconstructor(description: number) {\n\t\tthis.key = description;\n\t}\n\n\tgetKey() {\n\t\treturn this.key;\n\t}\n}\n\nexport class EventBus {\n\tprotected callbacks: { [key: string]: Function[] } = {};\n\n\tdispatch(key: string, value?: any) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.callbacks[key].forEach((callback) => callback(value));\n\n\t\treturn this;\n\t}\n\n\tlisten<T>(key: string, callback: (args: T) => void) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\tthis.callbacks[key] = [];\n\t\t}\n\n\t\treturn new Symbol(this.callbacks[key].push(callback) - 1);\n\t}\n\n\tunlisten(key: string, symbol: Symbol) {\n\t\tif (!(key in this.callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.callbacks[key].splice(symbol.getKey(), 1);\n\t}\n}\n","import { EventBus } from './classes';\n\nexport const SearchBus = new EventBus();\n\nexport const MainBus = new EventBus();\n","import React from 'react';\nimport { Paginated } from '../Contracts/misc';\nimport { outIf, toBool } from '../helpers';\n\ntype Props = {\n\tpagination: Paginated<any>;\n\tonChange: (url: string) => void;\n\tsmall?: boolean;\n};\n\nexport default function Pagination({ pagination, onChange, small }: Props) {\n\tconst links = pagination.links.filter((link) => Number.isInteger(Number(link.label)));\n\n\tconst handleClick = (url: string | null) => {\n\t\treturn (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\te.preventDefault();\n\t\t\tif (url) {\n\t\t\t\tonChange(url);\n\t\t\t}\n\t\t};\n\t};\n\n\tif (pagination.total <= pagination.per_page) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<nav aria-label='Page Navigation'>\n\t\t\t<ul className={`pagination ${outIf(toBool(small), 'pagination-sm')}`}>\n\t\t\t\t<li className={`page-item ${outIf(pagination.prev_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.prev_page_url}`} onClick={handleClick(pagination.prev_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&lt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Previous</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t{links.map(({ active, label, url }, index) => (\n\t\t\t\t\t<li className={`page-item ${outIf(active, 'active')}`} key={index}>\n\t\t\t\t\t\t<a className='page-link' href={`${url}`} onClick={handleClick(url)}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t\t<li className={`page-item ${outIf(pagination.next_page_url === null, 'disabled')}`}>\n\t\t\t\t\t<a className='page-link' href={`${pagination.next_page_url}`} onClick={handleClick(pagination.next_page_url)}>\n\t\t\t\t\t\t<span aria-hidden='true'>&gt;</span>\n\t\t\t\t\t\t<span className='sr-only'>Next</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n"],"sourceRoot":""}