(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[15],{260:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(4),s=c(2),r=c.n(s),i=c(6),l=c(7),d=c(3),o=c.n(d),b=c(21),j=c.n(b),u=c(88),m=c(16),h=c.n(m),O=c(11),f=c(93),p=c.n(f),x=c(0),v=function(e){var t=Object(a.useState)(!1),c=Object(l.a)(t,2),s=c[0],d=c[1],b=Object(a.useState)("Add"),m=Object(l.a)(b,2),f=m[0],v=m[1],N=Object(a.useState)(),g=Object(l.a)(N,2),y=g[0],_=g[1],k=Object(a.useState)(null),w=Object(l.a)(k,2),D=w[0],C=w[1],S=Object(a.useState)(null),M=Object(l.a)(S,2),q=M[0],E=M[1],U=Object(u.b)(),Y=U.register,A=U.handleSubmit,J=U.setValue,I=Object(n.h)(),V=Object(n.f)(),F=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,t.date_delivered=(null===D||void 0===D?void 0:D.toJSON())||null,t.expiry_date=(null===q||void 0===q?void 0:q.toJSON())||(new Date).toJSON(),e.next=6,"Add"===f?o.a.post("/pharmacy/medicines",t):o.a.put("/pharmacy/medicines/".concat(y),t);case 6:h.a.success("Medicine saved successfully."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Object(O.b)(e.t0);case 12:return e.prev=12,d(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(r.a.mark((function e(t){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/pharmacy/medicines/".concat(t));case 3:c=e.sent,a=c.data,J("description",a.description),J("unit_of_issue",a.unit_of_issue),J("estimated_unit_cost",a.estimated_unit_cost),J("quantity",a.quantity),C(a.date_delivered?j()(a.date_delivered).toDate():null),E(j()(a.expiry_date).toDate()),J("critical_value",a.critical_value),_(a.id),$(".form-group").addClass("is-filled"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),Object(O.b)(e.t0),V.goBack();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){I.path.includes("edit")&&(v("Edit"),K(I.params.id))}),[]),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsxs)("div",{className:"card-header card-header primary",children:[f," Medicine",Object(x.jsx)("p",{className:"card-category",children:"Complete the form below"}),Object(x.jsxs)("p",{className:"card-category",children:["Fields with ",Object(x.jsx)("span",{style:{color:"rgb(190, 0, 0)"},children:"*"})," are required."]})]}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("form",{onSubmit:A(F),children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-12 col-md-4",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Description"}),Object(x.jsx)("input",{ref:Y,type:"text",className:"form-control",disabled:s,name:"description"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-4",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Number of Units"}),Object(x.jsx)("input",{ref:Y,type:"number",className:"form-control",disabled:s,name:"number_of_units"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-4",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Unit of Issue"}),Object(x.jsx)("input",{ref:Y,type:"text",className:"form-control",disabled:s,name:"unit_of_issue"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-4",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Estimated Unit Cost"}),Object(x.jsx)("input",{ref:Y,type:"number",className:"form-control",disabled:s,name:"estimated_unit_cost"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-4",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Quantity"}),Object(x.jsx)("input",{ref:Y,type:"number",className:"form-control",disabled:s,name:"quantity"})]})}),Object(x.jsx)("div",{className:"col-12 col-md-4",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(x.jsx)("label",{className:"bmd-label-floating",children:"Date Delivered"}),Object(x.jsx)(p.a,{value:D||void 0,className:"form-control",onChange:function(e){return C(e[0])}})]})}),Object(x.jsx)("div",{className:"col-12 col-md-6",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group is-filled",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Expiry Date"}),Object(x.jsx)(p.a,{value:q||void 0,className:"form-control",onChange:function(e){return E(e[0])}})]})}),Object(x.jsx)("div",{className:"col-12 col-md-6",children:Object(x.jsxs)("div",{className:"form-group bmd-form-group",children:[Object(x.jsx)("label",{className:"bmd-label-floating required",children:"Critical Value"}),Object(x.jsx)("input",{ref:Y,type:"number",className:"form-control",disabled:s,name:"critical_value"})]})}),Object(x.jsx)("div",{className:"col-12",children:Object(x.jsx)("button",{type:"submit",className:"btn btn-info btn-sm",disabled:s,children:s?Object(x.jsx)("i",{className:"material-icons spin",children:"refresh"}):"Save"})})]})})})]})},N=c(32),g=c(85),y=c(14),_=c(87),k=c(86),w=function(e){var t=Object(a.useState)([]),c=Object(l.a)(t,2),s=c[0],d=c[1],b=Object(a.useState)(Object(O.c)()),u=Object(l.a)(b,2),m=u[0],f=u[1],p=Object(n.h)(),v=function(e){return"".concat(p.path).concat(e)},w=function(){var e=Object(i.a)(r.a.mark((function e(t){var c,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=y.a.get("medicine-page")||1,e.next=4,o.a.get(t||"/pharmacy/medicines?page=".concat(c));case 4:a=e.sent,n=a.data,d(n.data),f(n),y.a.set("medicine-page",n.current_page),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(O.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(r.a.mark((function e(t){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/search?model=Medicine&keyword=".concat(encodeURIComponent(t),"&paginate=false"));case 3:c=e.sent,a=c.data,d(a),f(Object(O.c)()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.toJSON()),h.a.error("Unable to search.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){w();var e=k.b.listen("submit",(function(e){e.length>0?D(e):w()}));return function(){k.b.unlisten("submit",e)}}),[]);var C=y.a.get("user");return Object(x.jsxs)(x.Fragment,{children:[["Admin"].includes(C.role)?null:Object(x.jsx)(N.b,{to:v("/add"),className:"btn btn-info btn-sm",children:"Add New Medicine"}),Object(x.jsx)(g.a,{title:"Medicines",head:function(){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"ID"}),Object(x.jsx)("th",{children:"Description"}),Object(x.jsx)("th",{children:"Number of Units"}),Object(x.jsx)("th",{children:"Unit of Issue"}),Object(x.jsx)("th",{children:"Estimated Unit Cost"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Date Delivered"}),Object(x.jsx)("th",{children:"Expiry Date"}),Object(x.jsx)("th",{children:"Critical Value"}),Object(x.jsx)("th",{children:"Released"}),Object(x.jsx)("th",{children:"Available"}),Object(x.jsx)("th",{children:"Estimated Cost"}),Object(x.jsx)("th",{children:"Actions"})]})},foot:function(){return Object(x.jsx)(_.a,{pagination:m,onChange:function(e){return w(e)}})},children:s.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.id}),Object(x.jsx)("td",{children:e.description}),Object(x.jsx)("td",{children:e.number_of_units}),Object(x.jsx)("td",{children:e.unit_of_issue}),Object(x.jsx)("td",{children:Object(O.a)(e.estimated_unit_cost)}),Object(x.jsx)("td",{children:e.quantity}),Object(x.jsx)("td",{children:e.date_delivered?j()(e.date_delivered).format("MMMM DD, YYYY"):"N/A"}),Object(x.jsx)("td",{children:j()(e.expiry_date).format("MMMM DD, YYYY")}),Object(x.jsx)("td",{children:e.critical_value}),Object(x.jsx)("td",{children:e.released}),Object(x.jsx)("td",{children:e.available}),Object(x.jsx)("td",{children:Object(O.a)(e.estimated_cost)}),Object(x.jsx)("td",{children:Object(x.jsxs)(N.b,{to:v("/".concat(e.id,"/edit")),className:"btn btn-warning btn-sm",title:"Edit",children:[Object(x.jsx)("i",{className:"material-icons mr-1",children:"create"}),"Edit"]})})]},t)}))})]})};t.default=function(e){var t=Object(n.h)(),c=function(e){return"".concat(t.path).concat(e)};return Object(x.jsxs)(n.c,{children:[Object(x.jsx)(n.a,{path:c(""),exact:!0,component:w}),Object(x.jsx)(n.a,{path:c("/add"),component:v}),Object(x.jsx)(n.a,{path:c("/:id/edit"),exact:!0,component:v})]})}},85:function(e,t,c){"use strict";c(1);var a=c(0);t.a=function(e){var t=e.title,c=e.subtitles,n=e.head,s=e.children,r=e.foot,i=e.className;return Object(a.jsxs)("div",{className:"card ".concat(i),children:[Object(a.jsxs)("div",{className:"card-header card-header-success",children:[Object(a.jsx)("h4",{className:"card-title",children:t}),c?Object(a.jsx)("p",{className:"card-category",children:c}):null]}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{className:"text-success",children:n()}),Object(a.jsx)("tbody",{children:s})]})})}),r?Object(a.jsx)("div",{className:"card-footer",children:r()}):null]})}},86:function(e,t,c){"use strict";c.d(t,"b",(function(){return i})),c.d(t,"a",(function(){return l}));var a=c(22),n=c(23),s=function(){function e(t){Object(a.a)(this,e),this.key=void 0,this.key=t}return Object(n.a)(e,[{key:"getKey",value:function(){return this.key}}]),e}(),r=function(){function e(){Object(a.a)(this,e),this.callbacks={}}return Object(n.a)(e,[{key:"dispatch",value:function(e,t){return e in this.callbacks?(this.callbacks[e].forEach((function(e){return e(t)})),this):this}},{key:"listen",value:function(e,t){return e in this.callbacks||(this.callbacks[e]=[]),new s(this.callbacks[e].push(t)-1)}},{key:"unlisten",value:function(e,t){e in this.callbacks&&this.callbacks[e].splice(t.getKey(),1)}}]),e}(),i=new r,l=new r},87:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));c(1);var a=c(11),n=c(0);function s(e){var t=e.pagination,c=e.onChange,s=e.small,r=t.links.filter((function(e){return Number.isInteger(Number(e.label))})),i=function(e){return function(t){t.preventDefault(),e&&c(e)}};return t.total<=t.per_page?null:Object(n.jsx)("nav",{"aria-label":"Page Navigation",children:Object(n.jsxs)("ul",{className:"pagination ".concat(Object(a.d)(Object(a.f)(s),"pagination-sm")),children:[Object(n.jsx)("li",{className:"page-item ".concat(Object(a.d)(null===t.prev_page_url,"disabled")),children:Object(n.jsxs)("a",{className:"page-link",href:"".concat(t.prev_page_url),onClick:i(t.prev_page_url),children:[Object(n.jsx)("span",{"aria-hidden":"true",children:"<"}),Object(n.jsx)("span",{className:"sr-only",children:"Previous"})]})}),r.map((function(e,t){var c=e.active,s=e.label,r=e.url;return Object(n.jsx)("li",{className:"page-item ".concat(Object(a.d)(c,"active")),children:Object(n.jsx)("a",{className:"page-link",href:"".concat(r),onClick:i(r),children:s})},t)})),Object(n.jsx)("li",{className:"page-item ".concat(Object(a.d)(null===t.next_page_url,"disabled")),children:Object(n.jsxs)("a",{className:"page-link",href:"".concat(t.next_page_url),onClick:i(t.next_page_url),children:[Object(n.jsx)("span",{"aria-hidden":"true",children:">"}),Object(n.jsx)("span",{className:"sr-only",children:"Next"})]})})]})})}}}]);
//# sourceMappingURL=15.61049946.chunk.js.map